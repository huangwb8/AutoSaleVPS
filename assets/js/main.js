var lr=Object.defineProperty;var or=(V,c,u)=>c in V?lr(V,c,{enumerable:!0,configurable:!0,writable:!0,value:u}):V[c]=u;var B=(V,c,u)=>or(V,typeof c!="symbol"?c+"":c,u);class cr{constructor(c,u){B(this,"baseUrl");B(this,"nonce");this.baseUrl=c.replace(/\/$/,""),this.nonce=u}async request(c,u={}){const o=await fetch(`${this.baseUrl}/${c.replace(/^\//,"")}`,{headers:{"Content-Type":"application/json","X-WP-Nonce":this.nonce,...u.headers||{}},credentials:"same-origin",...u});if(!o.ok){const m=await o.text();throw new Error(m||"ËØ∑Ê±ÇÂ§±Ë¥•")}return o.status===204?{}:await o.json()}fetchConfig(){return this.request("/config")}saveConfig(c){return this.request("/config",{method:"POST",body:JSON.stringify({content:c})})}fetchModel(){return this.request("/model")}saveModel(c){return this.request("/model",{method:"POST",body:JSON.stringify({content:c})})}saveApiKey(c){return this.request("/key",{method:"POST",body:JSON.stringify({api_key:c})})}fetchVps(){return this.request("/vps")}validateVps(c,u){return this.request("/vps/validate",{method:"POST",body:JSON.stringify({vendor:c,pid:u})})}refreshPromo(c,u){return this.request("/vps/promo",{method:"POST",body:JSON.stringify({vendor:c,pid:u})})}savePromo(c,u,o){return this.request("/vps/promo",{method:"POST",body:JSON.stringify({vendor:c,pid:u,content:o})})}runDiagnostics(){return this.request("/diagnostics",{method:"POST"})}saveTimezone(c){return this.request("/timezone",{method:"POST",body:JSON.stringify({timezone:c})})}fetchExtraCss(){return this.request("/design")}saveExtraCss(c){return this.request("/design",{method:"POST",body:JSON.stringify({extra_css:c})})}}function fr(V){return V&&V.__esModule&&Object.prototype.hasOwnProperty.call(V,"default")?V.default:V}var ur=function(){function V(o,m){function s(){this.constructor=o}s.prototype=m.prototype,o.prototype=new s}function c(o,m,s,b,C,w){this.message=o,this.expected=m,this.found=s,this.offset=b,this.line=C,this.column=w,this.name="SyntaxError"}V(c,Error);function u(o){var m=arguments.length>1?arguments[1]:{},s={},b={start:ot},C=ot,w=function(){return _t},a=s,_="#",q={type:"literal",value:"#",description:'"#"'},O=void 0,Z={type:"any",description:"any character"},z="[",te={type:"literal",value:"[",description:'"["'},Q="]",P={type:"literal",value:"]",description:'"]"'},A=function(e){Fe(R("ObjectPath",e,D,j))},N=function(e){Fe(R("ArrayPath",e,D,j))},T=function(e,r){return e.concat(r)},G=function(e){return[e]},I=function(e){return e},U=".",M={type:"literal",value:".",description:'"."'},W="=",ee={type:"literal",value:"=",description:'"="'},Me=function(e,r){Fe(R("Assign",r,D,j,e))},Vt=function(e){return e.join("")},Ie=function(e){return e.value},ie='"""',Pe={type:"literal",value:'"""',description:'"\\"\\"\\""'},re=null,ge=function(e){return R("String",e.join(""),D,j)},Ce='"',we={type:"literal",value:'"',description:'"\\""'},ne="'''",be={type:"literal",value:"'''",description:`"'''"`},Ae="'",Ee={type:"literal",value:"'",description:`"'"`},_e=function(e){return e},Lt=function(e){return e},Ft="\\",Ot={type:"literal",value:"\\",description:'"\\\\"'},Mt=function(){return""},It="e",Dt={type:"literal",value:"e",description:'"e"'},jt="E",Rt={type:"literal",value:"E",description:'"E"'},qt=function(e,r){return R("Float",parseFloat(e+"e"+r),D,j)},zt=function(e){return R("Float",parseFloat(e),D,j)},ke="+",Se={type:"literal",value:"+",description:'"+"'},De=function(e){return e.join("")},oe="-",ce={type:"literal",value:"-",description:'"-"'},je=function(e){return"-"+e.join("")},Ut=function(e){return R("Integer",parseInt(e,10),D,j)},Re="true",Kt={type:"literal",value:"true",description:'"true"'},Ht=function(){return R("Boolean",!0,D,j)},qe="false",Zt={type:"literal",value:"false",description:'"false"'},Jt=function(){return R("Boolean",!1,D,j)},Yt=function(){return R("Array",[],D,j)},Xt=function(e){return R("Array",e?[e]:[],D,j)},Gt=function(e){return R("Array",e,D,j)},Wt=function(e,r){return R("Array",e.concat(r),D,j)},ze=function(e){return e},Ue=",",Ke={type:"literal",value:",",description:'","'},Qt="{",es={type:"literal",value:"{",description:'"{"'},ts="}",ss={type:"literal",value:"}",description:'"}"'},rs=function(e){return R("InlineTable",e,D,j)},He=function(e,r){return R("InlineTableValue",r,D,j,e)},is=function(e){return"."+e},ns=function(e){return e.join("")},fe=":",ue={type:"literal",value:":",description:'":"'},Ze=function(e){return e.join("")},Je="T",Ye={type:"literal",value:"T",description:'"T"'},as="Z",ls={type:"literal",value:"Z",description:'"Z"'},os=function(e,r){return R("Date",new Date(e+"T"+r+"Z"),D,j)},cs=function(e,r){return R("Date",new Date(e+"T"+r),D,j)},fs=/^[ \t]/,us={type:"class",value:"[ \\t]",description:"[ \\t]"},Xe=`
`,Ge={type:"literal",value:`
`,description:'"\\n"'},hs="\r",ps={type:"literal",value:"\r",description:'"\\r"'},ds=/^[0-9a-f]/i,gs={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},ms=/^[0-9]/,vs={type:"class",value:"[0-9]",description:"[0-9]"},ys="_",$s={type:"literal",value:"_",description:'"_"'},xs=function(){return""},Ps=/^[A-Za-z0-9_\-]/,Cs={type:"class",value:"[A-Za-z0-9_\\-]",description:"[A-Za-z0-9_\\-]"},ws=function(e){return e.join("")},We='\\"',bs={type:"literal",value:'\\"',description:'"\\\\\\""'},As=function(){return'"'},Qe="\\\\",Es={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},_s=function(){return"\\"},et="\\b",ks={type:"literal",value:"\\b",description:'"\\\\b"'},Ss=function(){return"\b"},tt="\\t",Ns={type:"literal",value:"\\t",description:'"\\\\t"'},Ts=function(){return"	"},st="\\n",Bs={type:"literal",value:"\\n",description:'"\\\\n"'},Vs=function(){return`
`},rt="\\f",Ls={type:"literal",value:"\\f",description:'"\\\\f"'},Fs=function(){return"\f"},it="\\r",Os={type:"literal",value:"\\r",description:'"\\\\r"'},Ms=function(){return"\r"},nt="\\U",Is={type:"literal",value:"\\U",description:'"\\\\U"'},at=function(e){return nr(e.join(""))},lt="\\u",Ds={type:"literal",value:"\\u",description:'"\\\\u"'},t=0,$=0,he=0,Ne={line:1,column:1,seenCR:!1},me=0,Te=[],p=0,d={},ve;if("startRule"in m){if(!(m.startRule in b))throw new Error(`Can't start parsing from rule "`+m.startRule+'".');C=b[m.startRule]}function D(){return Be($).line}function j(){return Be($).column}function Be(e){function r(i,n,l){var f,h;for(f=n;f<l;f++)h=o.charAt(f),h===`
`?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):h==="\r"||h==="\u2028"||h==="\u2029"?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1)}return he!==e&&(he>e&&(he=0,Ne={line:1,column:1,seenCR:!1}),r(Ne,he,e),he=e),Ne}function g(e){t<me||(t>me&&(me=t,Te=[]),Te.push(e))}function js(e,r,i){function n(v){var x=1;for(v.sort(function(S,E){return S.description<E.description?-1:S.description>E.description?1:0});x<v.length;)v[x-1]===v[x]?v.splice(x,1):x++}function l(v,x){function S(le){function se(H){return H.charCodeAt(0).toString(16).toUpperCase()}return le.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(H){return"\\x0"+se(H)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(H){return"\\x"+se(H)}).replace(/[\u0180-\u0FFF]/g,function(H){return"\\u0"+se(H)}).replace(/[\u1080-\uFFFF]/g,function(H){return"\\u"+se(H)})}var E=new Array(v.length),L,F,K;for(K=0;K<v.length;K++)E[K]=v[K].description;return L=v.length>1?E.slice(0,-1).join(", ")+" or "+E[v.length-1]:E[0],F=x?'"'+S(x)+'"':"end of input","Expected "+L+" but "+F+" found."}var f=Be(i),h=i<o.length?o.charAt(i):null;return r!==null&&n(r),new c(l(r,h),r,h,i,f.line,f.column)}function ot(){var e,r,i,n=t*49+0,l=d[n];if(l)return t=l.nextPos,l.result;for(e=t,r=[],i=ct();i!==s;)r.push(i),i=ct();return r!==s&&($=e,r=w()),e=r,d[n]={nextPos:t,result:e},e}function ct(){var e,r,i,n,l,f,h,v=t*49+1,x=d[v];if(x)return t=x.nextPos,x.result;for(e=t,r=[],i=y();i!==s;)r.push(i),i=y();if(r!==s)if(i=Rs(),i!==s){for(n=[],l=y();l!==s;)n.push(l),l=y();if(n!==s){for(l=[],f=ye();f!==s;)l.push(f),f=ye();if(l!==s){if(f=[],h=Y(),h!==s)for(;h!==s;)f.push(h),h=Y();else f=a;f===s&&(f=xe()),f!==s?(r=[r,i,n,l,f],e=r):(t=e,e=a)}else t=e,e=a}else t=e,e=a}else t=e,e=a;else t=e,e=a;if(e===s){if(e=t,r=[],i=y(),i!==s)for(;i!==s;)r.push(i),i=y();else r=a;if(r!==s){if(i=[],n=Y(),n!==s)for(;n!==s;)i.push(n),n=Y();else i=a;i===s&&(i=xe()),i!==s?(r=[r,i],e=r):(t=e,e=a)}else t=e,e=a;e===s&&(e=Y())}return d[v]={nextPos:t,result:e},e}function Rs(){var e,r=t*49+2,i=d[r];return i?(t=i.nextPos,i.result):(e=ye(),e===s&&(e=qs(),e===s&&(e=zs(),e===s&&(e=Us()))),d[r]={nextPos:t,result:e},e)}function ye(){var e,r,i,n,l,f,h=t*49+3,v=d[h];if(v)return t=v.nextPos,v.result;if(e=t,o.charCodeAt(t)===35?(r=_,t++):(r=s,p===0&&g(q)),r!==s){for(i=[],n=t,l=t,p++,f=Y(),f===s&&(f=xe()),p--,f===s?l=O:(t=l,l=a),l!==s?(o.length>t?(f=o.charAt(t),t++):(f=s,p===0&&g(Z)),f!==s?(l=[l,f],n=l):(t=n,n=a)):(t=n,n=a);n!==s;)i.push(n),n=t,l=t,p++,f=Y(),f===s&&(f=xe()),p--,f===s?l=O:(t=l,l=a),l!==s?(o.length>t?(f=o.charAt(t),t++):(f=s,p===0&&g(Z)),f!==s?(l=[l,f],n=l):(t=n,n=a)):(t=n,n=a);i!==s?(r=[r,i],e=r):(t=e,e=a)}else t=e,e=a;return d[h]={nextPos:t,result:e},e}function qs(){var e,r,i,n,l,f,h=t*49+4,v=d[h];if(v)return t=v.nextPos,v.result;if(e=t,o.charCodeAt(t)===91?(r=z,t++):(r=s,p===0&&g(te)),r!==s){for(i=[],n=y();n!==s;)i.push(n),n=y();if(i!==s)if(n=ft(),n!==s){for(l=[],f=y();f!==s;)l.push(f),f=y();l!==s?(o.charCodeAt(t)===93?(f=Q,t++):(f=s,p===0&&g(P)),f!==s?($=e,r=A(n),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;return d[h]={nextPos:t,result:e},e}function zs(){var e,r,i,n,l,f,h,v,x=t*49+5,S=d[x];if(S)return t=S.nextPos,S.result;if(e=t,o.charCodeAt(t)===91?(r=z,t++):(r=s,p===0&&g(te)),r!==s)if(o.charCodeAt(t)===91?(i=z,t++):(i=s,p===0&&g(te)),i!==s){for(n=[],l=y();l!==s;)n.push(l),l=y();if(n!==s)if(l=ft(),l!==s){for(f=[],h=y();h!==s;)f.push(h),h=y();f!==s?(o.charCodeAt(t)===93?(h=Q,t++):(h=s,p===0&&g(P)),h!==s?(o.charCodeAt(t)===93?(v=Q,t++):(v=s,p===0&&g(P)),v!==s?($=e,r=N(l),e=r):(t=e,e=a)):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a;return d[x]={nextPos:t,result:e},e}function ft(){var e,r,i,n=t*49+6,l=d[n];if(l)return t=l.nextPos,l.result;if(e=t,r=[],i=ht(),i!==s)for(;i!==s;)r.push(i),i=ht();else r=a;return r!==s?(i=ut(),i!==s?($=e,r=T(r,i),e=r):(t=e,e=a)):(t=e,e=a),e===s&&(e=t,r=ut(),r!==s&&($=e,r=G(r)),e=r),d[n]={nextPos:t,result:e},e}function ut(){var e,r,i,n,l,f=t*49+7,h=d[f];if(h)return t=h.nextPos,h.result;for(e=t,r=[],i=y();i!==s;)r.push(i),i=y();if(r!==s)if(i=pe(),i!==s){for(n=[],l=y();l!==s;)n.push(l),l=y();n!==s?($=e,r=I(i),e=r):(t=e,e=a)}else t=e,e=a;else t=e,e=a;if(e===s){for(e=t,r=[],i=y();i!==s;)r.push(i),i=y();if(r!==s)if(i=Ve(),i!==s){for(n=[],l=y();l!==s;)n.push(l),l=y();n!==s?($=e,r=I(i),e=r):(t=e,e=a)}else t=e,e=a;else t=e,e=a}return d[f]={nextPos:t,result:e},e}function ht(){var e,r,i,n,l,f,h,v=t*49+8,x=d[v];if(x)return t=x.nextPos,x.result;for(e=t,r=[],i=y();i!==s;)r.push(i),i=y();if(r!==s)if(i=pe(),i!==s){for(n=[],l=y();l!==s;)n.push(l),l=y();if(n!==s)if(o.charCodeAt(t)===46?(l=U,t++):(l=s,p===0&&g(M)),l!==s){for(f=[],h=y();h!==s;)f.push(h),h=y();f!==s?($=e,r=I(i),e=r):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a;if(e===s){for(e=t,r=[],i=y();i!==s;)r.push(i),i=y();if(r!==s)if(i=Ve(),i!==s){for(n=[],l=y();l!==s;)n.push(l),l=y();if(n!==s)if(o.charCodeAt(t)===46?(l=U,t++):(l=s,p===0&&g(M)),l!==s){for(f=[],h=y();h!==s;)f.push(h),h=y();f!==s?($=e,r=I(i),e=r):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a}return d[v]={nextPos:t,result:e},e}function Us(){var e,r,i,n,l,f,h=t*49+9,v=d[h];if(v)return t=v.nextPos,v.result;if(e=t,r=pe(),r!==s){for(i=[],n=y();n!==s;)i.push(n),n=y();if(i!==s)if(o.charCodeAt(t)===61?(n=W,t++):(n=s,p===0&&g(ee)),n!==s){for(l=[],f=y();f!==s;)l.push(f),f=y();l!==s?(f=ae(),f!==s?($=e,r=Me(r,f),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;if(e===s)if(e=t,r=Ve(),r!==s){for(i=[],n=y();n!==s;)i.push(n),n=y();if(i!==s)if(o.charCodeAt(t)===61?(n=W,t++):(n=s,p===0&&g(ee)),n!==s){for(l=[],f=y();f!==s;)l.push(f),f=y();l!==s?(f=ae(),f!==s?($=e,r=Me(r,f),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;return d[h]={nextPos:t,result:e},e}function pe(){var e,r,i,n=t*49+10,l=d[n];if(l)return t=l.nextPos,l.result;if(e=t,r=[],i=At(),i!==s)for(;i!==s;)r.push(i),i=At();else r=a;return r!==s&&($=e,r=Vt(r)),e=r,d[n]={nextPos:t,result:e},e}function Ve(){var e,r,i=t*49+11,n=d[i];return n?(t=n.nextPos,n.result):(e=t,r=pt(),r!==s&&($=e,r=Ie(r)),e=r,e===s&&(e=t,r=dt(),r!==s&&($=e,r=Ie(r)),e=r),d[i]={nextPos:t,result:e},e)}function ae(){var e,r=t*49+12,i=d[r];return i?(t=i.nextPos,i.result):(e=Ks(),e===s&&(e=sr(),e===s&&(e=Ys(),e===s&&(e=Xs(),e===s&&(e=Gs(),e===s&&(e=Ws(),e===s&&(e=Qs())))))),d[r]={nextPos:t,result:e},e)}function Ks(){var e,r=t*49+13,i=d[r];return i?(t=i.nextPos,i.result):(e=Hs(),e===s&&(e=pt(),e===s&&(e=Zs(),e===s&&(e=dt()))),d[r]={nextPos:t,result:e},e)}function Hs(){var e,r,i,n,l,f=t*49+14,h=d[f];if(h)return t=h.nextPos,h.result;if(e=t,o.substr(t,3)===ie?(r=ie,t+=3):(r=s,p===0&&g(Pe)),r!==s)if(i=Y(),i===s&&(i=re),i!==s){for(n=[],l=vt();l!==s;)n.push(l),l=vt();n!==s?(o.substr(t,3)===ie?(l=ie,t+=3):(l=s,p===0&&g(Pe)),l!==s?($=e,r=ge(n),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a;return d[f]={nextPos:t,result:e},e}function pt(){var e,r,i,n,l=t*49+15,f=d[l];if(f)return t=f.nextPos,f.result;if(e=t,o.charCodeAt(t)===34?(r=Ce,t++):(r=s,p===0&&g(we)),r!==s){for(i=[],n=gt();n!==s;)i.push(n),n=gt();i!==s?(o.charCodeAt(t)===34?(n=Ce,t++):(n=s,p===0&&g(we)),n!==s?($=e,r=ge(i),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;return d[l]={nextPos:t,result:e},e}function Zs(){var e,r,i,n,l,f=t*49+16,h=d[f];if(h)return t=h.nextPos,h.result;if(e=t,o.substr(t,3)===ne?(r=ne,t+=3):(r=s,p===0&&g(be)),r!==s)if(i=Y(),i===s&&(i=re),i!==s){for(n=[],l=yt();l!==s;)n.push(l),l=yt();n!==s?(o.substr(t,3)===ne?(l=ne,t+=3):(l=s,p===0&&g(be)),l!==s?($=e,r=ge(n),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a;return d[f]={nextPos:t,result:e},e}function dt(){var e,r,i,n,l=t*49+17,f=d[l];if(f)return t=f.nextPos,f.result;if(e=t,o.charCodeAt(t)===39?(r=Ae,t++):(r=s,p===0&&g(Ee)),r!==s){for(i=[],n=mt();n!==s;)i.push(n),n=mt();i!==s?(o.charCodeAt(t)===39?(n=Ae,t++):(n=s,p===0&&g(Ee)),n!==s?($=e,r=ge(i),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;return d[l]={nextPos:t,result:e},e}function gt(){var e,r,i,n=t*49+18,l=d[n];return l?(t=l.nextPos,l.result):(e=Et(),e===s&&(e=t,r=t,p++,o.charCodeAt(t)===34?(i=Ce,t++):(i=s,p===0&&g(we)),p--,i===s?r=O:(t=r,r=a),r!==s?(o.length>t?(i=o.charAt(t),t++):(i=s,p===0&&g(Z)),i!==s?($=e,r=_e(i),e=r):(t=e,e=a)):(t=e,e=a)),d[n]={nextPos:t,result:e},e)}function mt(){var e,r,i,n=t*49+19,l=d[n];return l?(t=l.nextPos,l.result):(e=t,r=t,p++,o.charCodeAt(t)===39?(i=Ae,t++):(i=s,p===0&&g(Ee)),p--,i===s?r=O:(t=r,r=a),r!==s?(o.length>t?(i=o.charAt(t),t++):(i=s,p===0&&g(Z)),i!==s?($=e,r=_e(i),e=r):(t=e,e=a)):(t=e,e=a),d[n]={nextPos:t,result:e},e)}function vt(){var e,r,i,n=t*49+20,l=d[n];return l?(t=l.nextPos,l.result):(e=Et(),e===s&&(e=Js(),e===s&&(e=t,r=t,p++,o.substr(t,3)===ie?(i=ie,t+=3):(i=s,p===0&&g(Pe)),p--,i===s?r=O:(t=r,r=a),r!==s?(o.length>t?(i=o.charAt(t),t++):(i=s,p===0&&g(Z)),i!==s?($=e,r=Lt(i),e=r):(t=e,e=a)):(t=e,e=a))),d[n]={nextPos:t,result:e},e)}function Js(){var e,r,i,n,l,f=t*49+21,h=d[f];if(h)return t=h.nextPos,h.result;if(e=t,o.charCodeAt(t)===92?(r=Ft,t++):(r=s,p===0&&g(Ot)),r!==s)if(i=Y(),i!==s){for(n=[],l=bt();l!==s;)n.push(l),l=bt();n!==s?($=e,r=Mt(),e=r):(t=e,e=a)}else t=e,e=a;else t=e,e=a;return d[f]={nextPos:t,result:e},e}function yt(){var e,r,i,n=t*49+22,l=d[n];return l?(t=l.nextPos,l.result):(e=t,r=t,p++,o.substr(t,3)===ne?(i=ne,t+=3):(i=s,p===0&&g(be)),p--,i===s?r=O:(t=r,r=a),r!==s?(o.length>t?(i=o.charAt(t),t++):(i=s,p===0&&g(Z)),i!==s?($=e,r=_e(i),e=r):(t=e,e=a)):(t=e,e=a),d[n]={nextPos:t,result:e},e)}function Ys(){var e,r,i,n,l=t*49+23,f=d[l];return f?(t=f.nextPos,f.result):(e=t,r=$t(),r===s&&(r=Le()),r!==s?(o.charCodeAt(t)===101?(i=It,t++):(i=s,p===0&&g(Dt)),i===s&&(o.charCodeAt(t)===69?(i=jt,t++):(i=s,p===0&&g(Rt))),i!==s?(n=Le(),n!==s?($=e,r=qt(r,n),e=r):(t=e,e=a)):(t=e,e=a)):(t=e,e=a),e===s&&(e=t,r=$t(),r!==s&&($=e,r=zt(r)),e=r),d[l]={nextPos:t,result:e},e)}function $t(){var e,r,i,n,l,f,h=t*49+24,v=d[h];return v?(t=v.nextPos,v.result):(e=t,o.charCodeAt(t)===43?(r=ke,t++):(r=s,p===0&&g(Se)),r===s&&(r=re),r!==s?(i=t,n=de(),n!==s?(o.charCodeAt(t)===46?(l=U,t++):(l=s,p===0&&g(M)),l!==s?(f=de(),f!==s?(n=[n,l,f],i=n):(t=i,i=a)):(t=i,i=a)):(t=i,i=a),i!==s?($=e,r=De(i),e=r):(t=e,e=a)):(t=e,e=a),e===s&&(e=t,o.charCodeAt(t)===45?(r=oe,t++):(r=s,p===0&&g(ce)),r!==s?(i=t,n=de(),n!==s?(o.charCodeAt(t)===46?(l=U,t++):(l=s,p===0&&g(M)),l!==s?(f=de(),f!==s?(n=[n,l,f],i=n):(t=i,i=a)):(t=i,i=a)):(t=i,i=a),i!==s?($=e,r=je(i),e=r):(t=e,e=a)):(t=e,e=a)),d[h]={nextPos:t,result:e},e)}function Xs(){var e,r,i=t*49+25,n=d[i];return n?(t=n.nextPos,n.result):(e=t,r=Le(),r!==s&&($=e,r=Ut(r)),e=r,d[i]={nextPos:t,result:e},e)}function Le(){var e,r,i,n,l,f=t*49+26,h=d[f];if(h)return t=h.nextPos,h.result;if(e=t,o.charCodeAt(t)===43?(r=ke,t++):(r=s,p===0&&g(Se)),r===s&&(r=re),r!==s){if(i=[],n=k(),n!==s)for(;n!==s;)i.push(n),n=k();else i=a;i!==s?(n=t,p++,o.charCodeAt(t)===46?(l=U,t++):(l=s,p===0&&g(M)),p--,l===s?n=O:(t=n,n=a),n!==s?($=e,r=De(i),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;if(e===s)if(e=t,o.charCodeAt(t)===45?(r=oe,t++):(r=s,p===0&&g(ce)),r!==s){if(i=[],n=k(),n!==s)for(;n!==s;)i.push(n),n=k();else i=a;i!==s?(n=t,p++,o.charCodeAt(t)===46?(l=U,t++):(l=s,p===0&&g(M)),p--,l===s?n=O:(t=n,n=a),n!==s?($=e,r=je(i),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;return d[f]={nextPos:t,result:e},e}function Gs(){var e,r,i=t*49+27,n=d[i];return n?(t=n.nextPos,n.result):(e=t,o.substr(t,4)===Re?(r=Re,t+=4):(r=s,p===0&&g(Kt)),r!==s&&($=e,r=Ht()),e=r,e===s&&(e=t,o.substr(t,5)===qe?(r=qe,t+=5):(r=s,p===0&&g(Zt)),r!==s&&($=e,r=Jt()),e=r),d[i]={nextPos:t,result:e},e)}function Ws(){var e,r,i,n,l,f=t*49+28,h=d[f];if(h)return t=h.nextPos,h.result;if(e=t,o.charCodeAt(t)===91?(r=z,t++):(r=s,p===0&&g(te)),r!==s){for(i=[],n=J();n!==s;)i.push(n),n=J();i!==s?(o.charCodeAt(t)===93?(n=Q,t++):(n=s,p===0&&g(P)),n!==s?($=e,r=Yt(),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;if(e===s&&(e=t,o.charCodeAt(t)===91?(r=z,t++):(r=s,p===0&&g(te)),r!==s?(i=xt(),i===s&&(i=re),i!==s?(o.charCodeAt(t)===93?(n=Q,t++):(n=s,p===0&&g(P)),n!==s?($=e,r=Xt(i),e=r):(t=e,e=a)):(t=e,e=a)):(t=e,e=a),e===s)){if(e=t,o.charCodeAt(t)===91?(r=z,t++):(r=s,p===0&&g(te)),r!==s){if(i=[],n=$e(),n!==s)for(;n!==s;)i.push(n),n=$e();else i=a;i!==s?(o.charCodeAt(t)===93?(n=Q,t++):(n=s,p===0&&g(P)),n!==s?($=e,r=Gt(i),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;if(e===s)if(e=t,o.charCodeAt(t)===91?(r=z,t++):(r=s,p===0&&g(te)),r!==s){if(i=[],n=$e(),n!==s)for(;n!==s;)i.push(n),n=$e();else i=a;i!==s?(n=xt(),n!==s?(o.charCodeAt(t)===93?(l=Q,t++):(l=s,p===0&&g(P)),l!==s?($=e,r=Wt(i,n),e=r):(t=e,e=a)):(t=e,e=a)):(t=e,e=a)}else t=e,e=a}return d[f]={nextPos:t,result:e},e}function xt(){var e,r,i,n,l,f=t*49+29,h=d[f];if(h)return t=h.nextPos,h.result;for(e=t,r=[],i=J();i!==s;)r.push(i),i=J();if(r!==s)if(i=ae(),i!==s){for(n=[],l=J();l!==s;)n.push(l),l=J();n!==s?($=e,r=ze(i),e=r):(t=e,e=a)}else t=e,e=a;else t=e,e=a;return d[f]={nextPos:t,result:e},e}function $e(){var e,r,i,n,l,f,h,v=t*49+30,x=d[v];if(x)return t=x.nextPos,x.result;for(e=t,r=[],i=J();i!==s;)r.push(i),i=J();if(r!==s)if(i=ae(),i!==s){for(n=[],l=J();l!==s;)n.push(l),l=J();if(n!==s)if(o.charCodeAt(t)===44?(l=Ue,t++):(l=s,p===0&&g(Ke)),l!==s){for(f=[],h=J();h!==s;)f.push(h),h=J();f!==s?($=e,r=ze(i),e=r):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a;return d[v]={nextPos:t,result:e},e}function J(){var e,r=t*49+31,i=d[r];return i?(t=i.nextPos,i.result):(e=y(),e===s&&(e=Y(),e===s&&(e=ye())),d[r]={nextPos:t,result:e},e)}function Qs(){var e,r,i,n,l,f,h=t*49+32,v=d[h];if(v)return t=v.nextPos,v.result;if(e=t,o.charCodeAt(t)===123?(r=Qt,t++):(r=s,p===0&&g(es)),r!==s){for(i=[],n=y();n!==s;)i.push(n),n=y();if(i!==s){for(n=[],l=Pt();l!==s;)n.push(l),l=Pt();if(n!==s){for(l=[],f=y();f!==s;)l.push(f),f=y();l!==s?(o.charCodeAt(t)===125?(f=ts,t++):(f=s,p===0&&g(ss)),f!==s?($=e,r=rs(n),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a}else t=e,e=a}else t=e,e=a;return d[h]={nextPos:t,result:e},e}function Pt(){var e,r,i,n,l,f,h,v,x,S,E,L=t*49+33,F=d[L];if(F)return t=F.nextPos,F.result;for(e=t,r=[],i=y();i!==s;)r.push(i),i=y();if(r!==s)if(i=pe(),i!==s){for(n=[],l=y();l!==s;)n.push(l),l=y();if(n!==s)if(o.charCodeAt(t)===61?(l=W,t++):(l=s,p===0&&g(ee)),l!==s){for(f=[],h=y();h!==s;)f.push(h),h=y();if(f!==s)if(h=ae(),h!==s){for(v=[],x=y();x!==s;)v.push(x),x=y();if(v!==s)if(o.charCodeAt(t)===44?(x=Ue,t++):(x=s,p===0&&g(Ke)),x!==s){for(S=[],E=y();E!==s;)S.push(E),E=y();S!==s?($=e,r=He(i,h),e=r):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a;if(e===s){for(e=t,r=[],i=y();i!==s;)r.push(i),i=y();if(r!==s)if(i=pe(),i!==s){for(n=[],l=y();l!==s;)n.push(l),l=y();if(n!==s)if(o.charCodeAt(t)===61?(l=W,t++):(l=s,p===0&&g(ee)),l!==s){for(f=[],h=y();h!==s;)f.push(h),h=y();f!==s?(h=ae(),h!==s?($=e,r=He(i,h),e=r):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a}return d[L]={nextPos:t,result:e},e}function Ct(){var e,r,i,n=t*49+34,l=d[n];return l?(t=l.nextPos,l.result):(e=t,o.charCodeAt(t)===46?(r=U,t++):(r=s,p===0&&g(M)),r!==s?(i=de(),i!==s?($=e,r=is(i),e=r):(t=e,e=a)):(t=e,e=a),d[n]={nextPos:t,result:e},e)}function wt(){var e,r,i,n,l,f,h,v,x,S,E,L,F=t*49+35,K=d[F];return K?(t=K.nextPos,K.result):(e=t,r=t,i=k(),i!==s?(n=k(),n!==s?(l=k(),l!==s?(f=k(),f!==s?(o.charCodeAt(t)===45?(h=oe,t++):(h=s,p===0&&g(ce)),h!==s?(v=k(),v!==s?(x=k(),x!==s?(o.charCodeAt(t)===45?(S=oe,t++):(S=s,p===0&&g(ce)),S!==s?(E=k(),E!==s?(L=k(),L!==s?(i=[i,n,l,f,h,v,x,S,E,L],r=i):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a),r!==s&&($=e,r=ns(r)),e=r,d[F]={nextPos:t,result:e},e)}function er(){var e,r,i,n,l,f,h,v,x,S,E,L=t*49+36,F=d[L];return F?(t=F.nextPos,F.result):(e=t,r=t,i=k(),i!==s?(n=k(),n!==s?(o.charCodeAt(t)===58?(l=fe,t++):(l=s,p===0&&g(ue)),l!==s?(f=k(),f!==s?(h=k(),h!==s?(o.charCodeAt(t)===58?(v=fe,t++):(v=s,p===0&&g(ue)),v!==s?(x=k(),x!==s?(S=k(),S!==s?(E=Ct(),E===s&&(E=re),E!==s?(i=[i,n,l,f,h,v,x,S,E],r=i):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a),r!==s&&($=e,r=Ze(r)),e=r,d[L]={nextPos:t,result:e},e)}function tr(){var e,r,i,n,l,f,h,v,x,S,E,L,F,K,le,se,H,kt=t*49+37,Oe=d[kt];return Oe?(t=Oe.nextPos,Oe.result):(e=t,r=t,i=k(),i!==s?(n=k(),n!==s?(o.charCodeAt(t)===58?(l=fe,t++):(l=s,p===0&&g(ue)),l!==s?(f=k(),f!==s?(h=k(),h!==s?(o.charCodeAt(t)===58?(v=fe,t++):(v=s,p===0&&g(ue)),v!==s?(x=k(),x!==s?(S=k(),S!==s?(E=Ct(),E===s&&(E=re),E!==s?(o.charCodeAt(t)===45?(L=oe,t++):(L=s,p===0&&g(ce)),L===s&&(o.charCodeAt(t)===43?(L=ke,t++):(L=s,p===0&&g(Se))),L!==s?(F=k(),F!==s?(K=k(),K!==s?(o.charCodeAt(t)===58?(le=fe,t++):(le=s,p===0&&g(ue)),le!==s?(se=k(),se!==s?(H=k(),H!==s?(i=[i,n,l,f,h,v,x,S,E,L,F,K,le,se,H],r=i):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a)):(t=r,r=a),r!==s&&($=e,r=Ze(r)),e=r,d[kt]={nextPos:t,result:e},e)}function sr(){var e,r,i,n,l,f=t*49+38,h=d[f];return h?(t=h.nextPos,h.result):(e=t,r=wt(),r!==s?(o.charCodeAt(t)===84?(i=Je,t++):(i=s,p===0&&g(Ye)),i!==s?(n=er(),n!==s?(o.charCodeAt(t)===90?(l=as,t++):(l=s,p===0&&g(ls)),l!==s?($=e,r=os(r,n),e=r):(t=e,e=a)):(t=e,e=a)):(t=e,e=a)):(t=e,e=a),e===s&&(e=t,r=wt(),r!==s?(o.charCodeAt(t)===84?(i=Je,t++):(i=s,p===0&&g(Ye)),i!==s?(n=tr(),n!==s?($=e,r=cs(r,n),e=r):(t=e,e=a)):(t=e,e=a)):(t=e,e=a)),d[f]={nextPos:t,result:e},e)}function y(){var e,r=t*49+39,i=d[r];return i?(t=i.nextPos,i.result):(fs.test(o.charAt(t))?(e=o.charAt(t),t++):(e=s,p===0&&g(us)),d[r]={nextPos:t,result:e},e)}function Y(){var e,r,i,n=t*49+40,l=d[n];return l?(t=l.nextPos,l.result):(o.charCodeAt(t)===10?(e=Xe,t++):(e=s,p===0&&g(Ge)),e===s&&(e=t,o.charCodeAt(t)===13?(r=hs,t++):(r=s,p===0&&g(ps)),r!==s?(o.charCodeAt(t)===10?(i=Xe,t++):(i=s,p===0&&g(Ge)),i!==s?(r=[r,i],e=r):(t=e,e=a)):(t=e,e=a)),d[n]={nextPos:t,result:e},e)}function bt(){var e,r=t*49+41,i=d[r];return i?(t=i.nextPos,i.result):(e=Y(),e===s&&(e=y()),d[r]={nextPos:t,result:e},e)}function xe(){var e,r,i=t*49+42,n=d[i];return n?(t=n.nextPos,n.result):(e=t,p++,o.length>t?(r=o.charAt(t),t++):(r=s,p===0&&g(Z)),p--,r===s?e=O:(t=e,e=a),d[i]={nextPos:t,result:e},e)}function X(){var e,r=t*49+43,i=d[r];return i?(t=i.nextPos,i.result):(ds.test(o.charAt(t))?(e=o.charAt(t),t++):(e=s,p===0&&g(gs)),d[r]={nextPos:t,result:e},e)}function k(){var e,r,i=t*49+44,n=d[i];return n?(t=n.nextPos,n.result):(ms.test(o.charAt(t))?(e=o.charAt(t),t++):(e=s,p===0&&g(vs)),e===s&&(e=t,o.charCodeAt(t)===95?(r=ys,t++):(r=s,p===0&&g($s)),r!==s&&($=e,r=xs()),e=r),d[i]={nextPos:t,result:e},e)}function At(){var e,r=t*49+45,i=d[r];return i?(t=i.nextPos,i.result):(Ps.test(o.charAt(t))?(e=o.charAt(t),t++):(e=s,p===0&&g(Cs)),d[r]={nextPos:t,result:e},e)}function de(){var e,r,i,n=t*49+46,l=d[n];if(l)return t=l.nextPos,l.result;if(e=t,r=[],i=k(),i!==s)for(;i!==s;)r.push(i),i=k();else r=a;return r!==s&&($=e,r=ws(r)),e=r,d[n]={nextPos:t,result:e},e}function Et(){var e,r,i=t*49+47,n=d[i];return n?(t=n.nextPos,n.result):(e=t,o.substr(t,2)===We?(r=We,t+=2):(r=s,p===0&&g(bs)),r!==s&&($=e,r=As()),e=r,e===s&&(e=t,o.substr(t,2)===Qe?(r=Qe,t+=2):(r=s,p===0&&g(Es)),r!==s&&($=e,r=_s()),e=r,e===s&&(e=t,o.substr(t,2)===et?(r=et,t+=2):(r=s,p===0&&g(ks)),r!==s&&($=e,r=Ss()),e=r,e===s&&(e=t,o.substr(t,2)===tt?(r=tt,t+=2):(r=s,p===0&&g(Ns)),r!==s&&($=e,r=Ts()),e=r,e===s&&(e=t,o.substr(t,2)===st?(r=st,t+=2):(r=s,p===0&&g(Bs)),r!==s&&($=e,r=Vs()),e=r,e===s&&(e=t,o.substr(t,2)===rt?(r=rt,t+=2):(r=s,p===0&&g(Ls)),r!==s&&($=e,r=Fs()),e=r,e===s&&(e=t,o.substr(t,2)===it?(r=it,t+=2):(r=s,p===0&&g(Os)),r!==s&&($=e,r=Ms()),e=r,e===s&&(e=rr()))))))),d[i]={nextPos:t,result:e},e)}function rr(){var e,r,i,n,l,f,h,v,x,S,E,L=t*49+48,F=d[L];return F?(t=F.nextPos,F.result):(e=t,o.substr(t,2)===nt?(r=nt,t+=2):(r=s,p===0&&g(Is)),r!==s?(i=t,n=X(),n!==s?(l=X(),l!==s?(f=X(),f!==s?(h=X(),h!==s?(v=X(),v!==s?(x=X(),x!==s?(S=X(),S!==s?(E=X(),E!==s?(n=[n,l,f,h,v,x,S,E],i=n):(t=i,i=a)):(t=i,i=a)):(t=i,i=a)):(t=i,i=a)):(t=i,i=a)):(t=i,i=a)):(t=i,i=a)):(t=i,i=a),i!==s?($=e,r=at(i),e=r):(t=e,e=a)):(t=e,e=a),e===s&&(e=t,o.substr(t,2)===lt?(r=lt,t+=2):(r=s,p===0&&g(Ds)),r!==s?(i=t,n=X(),n!==s?(l=X(),l!==s?(f=X(),f!==s?(h=X(),h!==s?(n=[n,l,f,h],i=n):(t=i,i=a)):(t=i,i=a)):(t=i,i=a)):(t=i,i=a),i!==s?($=e,r=at(i),e=r):(t=e,e=a)):(t=e,e=a)),d[L]={nextPos:t,result:e},e)}var _t=[];function ir(e,r,i){var n=new Error(e);throw n.line=r,n.column=i,n}function Fe(e){_t.push(e)}function R(e,r,i,n,l){var f={type:e,value:r,line:i(),column:n()};return l&&(f.key=l),f}function nr(e,r,i){var n=parseInt("0x"+e);if(!isFinite(n)||Math.floor(n)!=n||n<0||n>1114111||n>55295&&n<57344)ir("Invalid Unicode escape code: "+e,r,i);else return ar(n)}function ar(){var e=16384,r=[],i,n,l=-1,f=arguments.length;if(!f)return"";for(var h="";++l<f;){var v=Number(arguments[l]);v<=65535?r.push(v):(v-=65536,i=(v>>10)+55296,n=v%1024+56320,r.push(i,n)),(l+1==f||r.length>e)&&(h+=String.fromCharCode.apply(null,r),r.length=0)}return h}if(ve=C(),ve!==s&&t===o.length)return ve;throw ve!==s&&t<o.length&&g({type:"end",description:"end of input"}),js(null,Te,me)}return{SyntaxError:c,parse:u}}();function hr(V){var c=[],u=[],o="",m=Object.create(null),s=m;return b(V);function b(P){for(var A,N=0;N<P.length;N++)switch(A=P[N],A.type){case"Assign":w(A);break;case"ObjectPath":O(A);break;case"ArrayPath":Z(A);break}return m}function C(P,A,N){var T=new Error(P);throw T.line=A,T.column=N,T}function w(P){var A=P.key,N=P.value,T=P.line,G=P.column,I;o?I=o+"."+A:I=A,typeof s[A]<"u"&&C("Cannot redefine existing key '"+I+"'.",T,G),s[A]=_(N),a(I)||(c.push(I),u.push(I))}function a(P){return c.indexOf(P)!==-1}function _(P){return P.type==="Array"?te(P.value):P.type==="InlineTable"?q(P.value):P.value}function q(P){for(var A=Object.create(null),N=0;N<P.length;N++){var T=P[N];T.value.type==="InlineTable"?A[T.key]=q(T.value.value):T.type==="InlineTableValue"&&(A[T.key]=_(T.value))}return A}function O(P){var A=P.value,N=A.map(Q).join("."),T=P.line,G=P.column;a(N)&&C("Cannot redefine existing key '"+A+"'.",T,G),c.push(N),s=z(m,A,Object.create(null),T,G),o=A}function Z(P){var A=P.value,N=A.map(Q).join("."),T=P.line,G=P.column;if(a(N)||c.push(N),c=c.filter(function(U){return U.indexOf(N)!==0}),c.push(N),s=z(m,A,[],T,G),o=N,s instanceof Array){var I=Object.create(null);s.push(I),s=I}else C("Cannot redefine existing key '"+A+"'.",T,G)}function z(P,A,N,T,G){var I=[],U="";A.join(".");for(var M=P,W=0;W<A.length;W++){var ee=A[W];I.push(ee),U=I.join("."),typeof M[ee]>"u"?W===A.length-1?M[ee]=N:M[ee]=Object.create(null):W!==A.length-1&&u.indexOf(U)>-1&&C("Cannot redefine existing key '"+U+"'.",T,G),M=M[ee],M instanceof Array&&M.length&&W<A.length-1&&(M=M[M.length-1])}return M}function te(P){for(var A=null,N=0;N<P.length;N++){var T=P[N];A===null?A=T.type:T.type!==A&&C("Cannot add value of type "+T.type+" to array of type "+A+".",T.line,T.column)}return P.map(_)}function Q(P){return P.indexOf(".")>-1?'"'+P+'"':P}}var pr={compile:hr},dr=ur,gr=pr,mr={parse:function(V){var c=dr.parse(V.toString());return gr.compile(c)}};const vr=fr(mr);class St{constructor(c){B(this,"raw");B(this,"tree");this.raw=c;try{this.tree=vr.parse(c)||{}}catch(u){console.error("TOML parse error",u),this.tree={}}}getRaw(){return this.raw}listVps(){const c=this.tree.aff??{},u=this.tree.url??{},o=this.tree.vps??{},m=[];return Object.entries(o).forEach(([s,b])=>{Object.entries(b).forEach(([C,w])=>{var Z,z;const a=w.pid||C,_=((Z=u[s])==null?void 0:Z.sale_format)??"",q=((z=u[s])==null?void 0:z.valid_format)??"",O=this.resolveAffCode(c[s]);m.push({vendor:s,pid:a,humanComment:w.human_comment||"",saleUrl:this.fillTemplate(_,O,a),validUrl:this.fillTemplate(q,O,a)})})}),m}getIntervalSeconds(c){var o,m;const u=(m=(o=this.tree.url)==null?void 0:o[c])==null?void 0:m.valid_interval_time;return u?Number(u):86400}getDelayRange(c){var C,w;const u=((w=(C=this.tree.url)==null?void 0:C[c])==null?void 0:w.valid_vps_time)??"5-10";if(!u.includes("-")){const a=Math.max(1,Number(u));return{min:a,max:a}}const[o,m]=u.split("-"),s=Math.max(1,Number(o)),b=Math.max(s,Number(m));return{min:s,max:b}}resolveAffCode(c){return c?c.code??Object.values(c).join(""):""}fillTemplate(c,u,o){return c?c.replace("{aff}",encodeURIComponent(u)).replace("{pid}",encodeURIComponent(o)):""}}class Nt{constructor(c,u){B(this,"element");this.element=document.createElement("div"),this.element.className="asv-modal hidden";const o=document.createElement("div");o.className="asv-modal__body";const m=document.createElement("header");m.className="asv-modal__header",m.innerHTML=`<h3>${c}</h3>`;const s=document.createElement("button");s.className="asv-modal__close",s.type="button",s.textContent="√ó",s.addEventListener("click",()=>this.hide()),m.appendChild(s),o.appendChild(m),o.appendChild(u),this.element.appendChild(o)}mount(c){c.appendChild(this.element)}show(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}getNode(){return this.element}}class yr{constructor(c,u){B(this,"node");B(this,"timezone");this.node=c,this.timezone=u}setTimezone(c){this.timezone=c}push(c,u="info"){const o=this.formatTime(),m=document.createElement("div");m.className=`asv-log-row asv-log-${u}`,m.textContent=`[${o}] ${c}`,this.node.prepend(m)}formatTime(){try{return new Date().toLocaleString("zh-CN",{timeZone:this.timezone,hour12:!1})}catch(c){return console.warn("timezone fallback",c),new Date().toLocaleString()}}}const $r=`[aff]
[aff.rn]
4886

[url]
[url.rn]
sale_format = 'https://my.racknerd.com/aff.php?aff={aff}&pid={pid}'
valid_format = 'https://my.racknerd.com/cart.php?a=add&pid={pid}'
valid_interval_time = '172800'
valid_vps_time = '5-10'

[vps]
[vps.rn.923]
pid = '923'
human_comment = 'ÈùûÂ∏∏Âü∫Á°ÄÁöÑ‰∏ÄÊ¨æVPSÔºå‰ΩÜÊòØÂÆπÈáèÁõ∏ÂØπÊù•ËØ¥ËøòÊòØÊØîËæÉÂ§ßÁöÑ„ÄÇ'

[vps.rn.924]
pid = '924'
human_comment = ''

[vps.rn.925]
pid = '925'
human_comment = ''

[vps.rn.926]
pid = '926'
human_comment = ''

[vps.rn.927]
pid = '927'
human_comment = ''`,xr=`[model_providers]
[model_providers.omg]
base_url = 'https://api.ohmygpt.com/v1'
prompt_valid = 'Âü∫‰∫éËæìÂÖ•Âà§Êñ≠VPSÊòØÂê¶Â∑≤ÁªèÂçñÂÆåÊàñ‰∏ãÊû∂ÔºõÂ¶ÇÊûúÂ∑≤ÁªèÂçñÂÆåÊàñ‰∏ãÊû∂ÔºåËØ∑ËøîÂõûFALSEÔºõÂê¶ÂàôÔºåËØ∑ËøîÂõûTRUE'
prompt_vps_info = 'Âü∫‰∫éËæìÂÖ•ÁªôÂá∫‰∏ÄÊñ≠Êé®ÈîÄVPSÁöÑÂπøÂëäÔºå20-100‰∏™ÁÆÄ‰Ωì‰∏≠Êñá„ÄÇÊé®ÂπøË¶ÅÊ±ÇË¥¥ÂêàVPSÁöÑÂÆûÈôÖÔºå‰∏çËÉΩÊó†ËÑëÊé®ÔºåË¶ÅÂÉè‰∏Ä‰∏™‰ºòÁßÄÁöÑVPSÊé®ÂπøÂïÜÈÇ£Ê†∑Êé®Âπø‰∫ßÂìÅ„ÄÇ'`,Pr=`/* ÈÄÇÈÖç https://blognas.hwb0307.com/ad ÁöÑÊüîÂíåÂç°ÁâáÈ£éÊ†ºÔºåÂèØÊåâÈúÄ‰øÆÊîπ */
.asv-root {
  box-shadow: none;
  background: rgba(255, 255, 255, 0.85);
  border-radius: 12px;
  padding: 1.2rem;
}

.asv-card {
  border-radius: 12px;
  border: 1px solid rgba(15, 23, 42, 0.08);
  box-shadow: none;
}

.asv-sale-btn {
  border-radius: 6px;
  background: #f97316;
  color: #fff !important;
}`;class Cr{constructor(c,u){B(this,"root");B(this,"rest");B(this,"logPanel");B(this,"logPanelHost");B(this,"bootstrap");B(this,"vpsContainer");B(this,"timezoneSelect");B(this,"configBundle");B(this,"modelBundle");B(this,"cssBundle");B(this,"keyModal");B(this,"keyInput");B(this,"hasKey");B(this,"currentConfig");B(this,"currentVps",[]);B(this,"availabilityTimer");B(this,"inFlightValidation",!1);B(this,"extraCssNode");this.root=c,this.bootstrap=u,this.rest=new cr(u.restUrl,u.nonce),this.hasKey=u.hasKey}init(){this.applyExtraCss(this.bootstrap.extraCss||""),this.renderLayout(),this.mountLogPanel(),this.attachTimezone(),this.attachButtons(),this.loadVpsCards(),this.bootstrap.isAdmin&&(this.prepareModals(),this.loadConfigForEditing(),this.loadModelForEditing(),this.loadExtraCss())}mountLogPanel(){this.logPanel=new yr(this.logPanelHost,this.bootstrap.timezone)}renderLayout(){if(this.root.innerHTML="",this.bootstrap.isAdmin){const c=document.createElement("div");c.className="asv-toolbar";const u=document.createElement("div");u.className="asv-actions";const o=this.createButton("ÁºñËæëVPSÈÖçÁΩÆ");o.dataset.action="edit-config";const m=this.createButton("ÁºñËæëÊ®°ÂûãÈÖçÁΩÆ");m.dataset.action="edit-model";const s=this.createButton(this.hasKey?"Êõ¥Êñ∞KEY":"Ê∑ªÂä†KEY");s.dataset.action="add-key";const b=this.createButton("È¢ùÂ§ñCSS");b.dataset.action="edit-css";const C=this.createButton("Ê£ÄÊü•ÂèØÁî®ÊÄß");C.dataset.action="diagnostics",u.append(o,m,s,b,C);const w=document.createElement("div");w.className="asv-timezone";const a=document.createElement("label");a.textContent="Êó∂Âå∫";const _=document.createElement("select");this.bootstrap.options.forEach(q=>{const O=document.createElement("option");O.value=q,O.textContent=q,q===this.bootstrap.timezone&&(O.selected=!0),_.appendChild(O)}),this.timezoneSelect=_,a.appendChild(_),w.appendChild(a),c.append(u,w),this.root.appendChild(c)}this.logPanelHost=document.createElement("div"),this.logPanelHost.className="asv-log-panel",this.root.appendChild(this.logPanelHost),this.vpsContainer=document.createElement("div"),this.vpsContainer.className="asv-vps-list",this.root.appendChild(this.vpsContainer)}createButton(c){const u=document.createElement("button");return u.type="button",u.textContent=c,u.className="asv-btn",u}attachTimezone(){var c;(c=this.timezoneSelect)==null||c.addEventListener("change",async()=>{const u=this.timezoneSelect.value;try{await this.rest.saveTimezone(u),this.logPanel.setTimezone(u),this.logPanel.push(`Â∑≤ÂàáÊç¢Âà∞ ${u}`)}catch(o){this.logPanel.push(`ËÆæÁΩÆÊó∂Âå∫Â§±Ë¥•Ôºö${o.message}`,"error")}})}attachButtons(){this.root.addEventListener("click",c=>{const u=c.target;if(u.matches("[data-action]")){if(!this.bootstrap.isAdmin){this.logPanel.push("ÈúÄË¶ÅÁÆ°ÁêÜÂëòÊùÉÈôêÊâßË°åÊ≠§Êìç‰Ωú","error");return}switch(u.dataset.action){case"edit-config":this.configBundle.modal.show();break;case"edit-model":this.modelBundle.modal.show();break;case"edit-css":this.cssBundle.modal.show();break;case"add-key":this.keyModal.show();break;case"diagnostics":this.runDiagnostics();break}}})}prepareModals(){this.configBundle=this.createEditorModal("ÁºñËæë config.toml",$r,async()=>{try{await this.rest.saveConfig(this.configBundle.textarea.value),this.logPanel.push("ÈÖçÁΩÆÂ∑≤‰øùÂ≠ò","success"),this.currentConfig=new St(this.configBundle.textarea.value),this.loadVpsCards(),this.triggerAvailabilitySweep("‰øùÂ≠òÈÖçÁΩÆÂêéÁ´ãÂç≥È™åËØÅ")}catch(s){this.logPanel.push(`‰øùÂ≠òÂ§±Ë¥•Ôºö${s.message}`,"error")}}),this.modelBundle=this.createEditorModal("ÁºñËæë model.toml",xr,async()=>{try{await this.rest.saveModel(this.modelBundle.textarea.value),this.logPanel.push("Ê®°ÂûãÈÖçÁΩÆÂ∑≤‰øùÂ≠ò","success"),this.loadVpsCards()}catch(s){this.logPanel.push(`‰øùÂ≠òÊ®°ÂûãÂ§±Ë¥•Ôºö${s.message}`,"error")}}),this.cssBundle=this.createEditorModal("È¢ùÂ§ñ CSSÔºàÂèØÈÄâÔºâ",Pr,async()=>{try{await this.rest.saveExtraCss(this.cssBundle.textarea.value),this.applyExtraCss(this.cssBundle.textarea.value),this.logPanel.push("È¢ùÂ§ñ CSS Â∑≤‰øùÂ≠ò","success"),this.cssBundle.modal.hide()}catch(s){this.logPanel.push(`‰øùÂ≠ò CSS Â§±Ë¥•Ôºö${s.message}`,"error")}});const c=document.createElement("div");c.className="asv-modal__content";const u=document.createElement("input");u.type="password",u.placeholder="sk-xxx",u.className="asv-input",this.keyInput=u;const o=document.createElement("button");o.type="button",o.className="asv-eye",o.textContent="üëÅ",o.addEventListener("mouseenter",()=>{this.keyInput.type="text"}),o.addEventListener("mouseleave",()=>{this.keyInput.type="password"});const m=this.createButton("‰øùÂ≠òÈÖçÁΩÆ");m.addEventListener("click",async()=>{try{await this.rest.saveApiKey(this.keyInput.value),this.hasKey=!0,this.logPanel.push("API KEY Â∑≤Êõ¥Êñ∞","success"),this.keyModal.hide(),this.keyInput.value=""}catch(s){this.logPanel.push(`‰øùÂ≠ò KEY Â§±Ë¥•Ôºö${s.message}`,"error")}}),c.append(u,o,m),this.keyModal=new Nt("Ê∑ªÂä†/Êõ¥Êñ∞ KEY",c),this.keyModal.mount(this.root)}createEditorModal(c,u,o){const m=document.createElement("div");if(m.className="asv-modal__content",u){const w=document.createElement("details");w.className="asv-helper";const a=document.createElement("summary");a.textContent="Êü•ÁúãÈªòËÆ§Á§∫‰æã";const _=document.createElement("pre");_.textContent=u,w.append(a,_),m.appendChild(w)}const s=document.createElement("textarea");s.className="asv-textarea",s.rows=18;const b=this.createButton("‰øùÂ≠òÈÖçÁΩÆ");b.addEventListener("click",o),m.append(s,b);const C=new Nt(c,m);return C.mount(this.root),{modal:C,textarea:s,saveButton:b}}async loadConfigForEditing(){try{const{content:c}=await this.rest.fetchConfig();this.configBundle.textarea.value=c,this.currentConfig=new St(c),this.logPanel.push("Â∑≤ËΩΩÂÖ• config.toml"),this.scheduleValidation()}catch(c){this.logPanel.push(`ËΩΩÂÖ• config.toml Â§±Ë¥•Ôºö${c.message}`,"error")}}async loadModelForEditing(){try{const{content:c}=await this.rest.fetchModel();this.modelBundle.textarea.value=c,this.logPanel.push("Â∑≤ËΩΩÂÖ• model.toml")}catch(c){this.logPanel.push(`ËΩΩÂÖ• model.toml Â§±Ë¥•Ôºö${c.message}`,"error")}}async loadExtraCss(){try{const{extraCss:c}=await this.rest.fetchExtraCss();this.cssBundle.textarea.value=c,this.applyExtraCss(c),this.logPanel.push("Â∑≤ËΩΩÂÖ•È¢ùÂ§ñ CSS")}catch(c){this.logPanel.push(`ËΩΩÂÖ•È¢ùÂ§ñ CSS Â§±Ë¥•Ôºö${c.message}`,"error")}}async loadVpsCards(){this.vpsContainer.innerHTML='<div class="asv-loading">Ê≠£Âú®ÊäìÂèñVPSÊï∞ÊçÆ...</div>';try{const{vps:c}=await this.rest.fetchVps();this.currentVps=c,this.renderVpsList(c),this.bootstrap.isAdmin&&this.scheduleValidation()}catch(c){this.vpsContainer.innerHTML='<p class="asv-error">Êó†Ê≥ïËé∑ÂèñVPS‰ø°ÊÅØ</p>',this.logPanel.push(`Ëé∑ÂèñVPSÂ§±Ë¥•Ôºö${c.message}`,"error")}}renderVpsList(c){if(this.vpsContainer.innerHTML="",!c.length){this.vpsContainer.innerHTML="<p>ÊöÇÊó† VPS ËÆ∞ÂΩï</p>";return}c.forEach(u=>{const o=document.createElement("article");o.className="asv-card",o.dataset.key=`${u.vendor}-${u.pid}`,u.available===!1&&o.classList.add("asv-card--offline");const m=document.createElement("div");m.className="asv-card__title";const s=document.createElement("strong");s.textContent=`${u.vendor.toUpperCase()} #${u.pid}`,m.append(s,this.createStatusPill(u)),o.appendChild(m);const b=document.createElement("a");b.href=u.sale_url,b.target="_blank",b.rel="noopener",b.className="asv-sale-btn",b.textContent="ÊâìÂºÄÊé®ÂπøÈìæÊé•",o.appendChild(b);const C=document.createElement("p");C.className="asv-card__promo",C.textContent=this.formatPromo(u),o.appendChild(C),this.bootstrap.isAdmin&&o.appendChild(this.createPromoEditor(u,C));const w=document.createElement("pre");if(w.className="asv-meta-block",w.textContent=u.meta.length?u.meta.join(`
`):"Á≠âÂæÖÊäìÂèñ VPS ËØ¶ÊÉÖÔºå‰øùÂ≠òÈÖçÁΩÆÂπ∂È™åËØÅÂêéËá™Âä®Â°´ÂÖÖ„ÄÇ",o.appendChild(w),u.human_comment){const _=document.createElement("div");_.className="asv-card__note",_.textContent=u.human_comment,o.appendChild(_)}const a=document.createElement("footer");if(a.className="asv-card__footer",this.bootstrap.isAdmin){const _=document.createElement("button");_.className="asv-btn asv-btn--ghost",_.type="button",_.textContent="È™åËØÅ",_.addEventListener("click",()=>this.validateSingle(u.vendor,u.pid,"ÊâãÂä®È™åËØÅ")),a.appendChild(_)}o.appendChild(a),this.vpsContainer.appendChild(o)})}createPromoEditor(c,u){const o=document.createElement("div");o.className="asv-promo-editor";const m=document.createElement("textarea");m.className="asv-promo-editor__textarea",m.value=c.promo||"",m.placeholder="ËæìÂÖ•Ëá™ÂÆö‰πâÊé®ÂπøËØ≠Ôºå20-100 Â≠óÔºå‰øùÊåÅÁúüÂÆûÈÖçÁΩÆ„ÄÇ",o.appendChild(m);const s=document.createElement("div");s.className="asv-promo-hint",s.textContent=this.describePromoSource(c.promo_source),o.appendChild(s);const b=document.createElement("div");b.className="asv-promo-actions";const C=this.createButton("‰øùÂ≠òÊé®ÂπøËØ≠");C.classList.add("asv-btn--sm");const w=this.createButton("AI ÈáçÂÜô");return w.classList.add("asv-btn--ghost","asv-btn--sm"),C.addEventListener("click",()=>this.persistPromoOverride(c.vendor,c.pid,m,u,s,C,w)),w.addEventListener("click",()=>this.regeneratePromo(c.vendor,c.pid,m,u,s,C,w)),b.append(C,w),o.appendChild(b),o}describePromoSource(c){return c==="manual"?"ÂΩìÂâç‰∏∫ÁÆ°ÁêÜÂëòËá™ÂÆö‰πâÂÜÖÂÆπ":c==="llm"?"AI Âü∫‰∫é prompt_vps_info Ëá™Âä®ÁîüÊàê":"Êú™Ê£ÄÊµãÂà∞ AI ÁªìÊûúÔºåÂ∞ÜÂ±ïÁ§∫ÈªòËÆ§ÊèèËø∞"}togglePromoButtons(c,...u){u.forEach(o=>{o.disabled=c})}async persistPromoOverride(c,u,o,m,s,b,C){const w=o.value.trim();if(!w){this.logPanel.push("Êé®ÂπøËØ≠‰∏çËÉΩ‰∏∫Á©∫","error"),o.focus();return}this.togglePromoButtons(!0,b,C);try{const a=await this.rest.savePromo(c,u,w);m.textContent=a.promo||"Á≠âÂæÖÁîüÊàêÊé®ÂπøËØùÊúØ...",o.value=a.promo||"",s.textContent=this.describePromoSource(a.source),this.updatePromoRecord(c,u,a.promo,a.source),this.logPanel.push(`${c} ${u} Êé®ÂπøËØ≠Â∑≤‰øùÂ≠ò`,"success")}catch(a){this.logPanel.push(`‰øùÂ≠òÊé®ÂπøËØ≠Â§±Ë¥•Ôºö${a.message}`,"error")}finally{this.togglePromoButtons(!1,b,C)}}async regeneratePromo(c,u,o,m,s,b,C){this.togglePromoButtons(!0,b,C);try{const w=await this.rest.refreshPromo(c,u);m.textContent=w.promo||"Á≠âÂæÖÁîüÊàêÊé®ÂπøËØùÊúØ...",o.value=w.promo||"",s.textContent=this.describePromoSource(w.source),this.updatePromoRecord(c,u,w.promo,w.source),this.logPanel.push(`${c} ${u} Êé®ÂπøËØ≠Â∑≤ÈáçÊñ∞ÁîüÊàê`,"success")}catch(w){this.logPanel.push(`ÈáçÊñ∞ÁîüÊàêÊé®ÂπøËØ≠Â§±Ë¥•Ôºö${w.message}`,"error")}finally{this.togglePromoButtons(!1,b,C)}}updatePromoRecord(c,u,o,m){const s=this.currentVps.find(b=>b.vendor===c&&b.pid===u);s&&(s.promo=o,s.promo_source=m)}formatPromo(c){return c.promo||"Á≠âÂæÖÁîüÊàêÊé®ÂπøËØùÊúØ..."}createStatusPill(c){const u=document.createElement("span");return u.className="asv-status-pill",c.available===null?(u.classList.add("asv-status-pill--idle"),u.textContent="Á≠âÂæÖÈ™åËØÅ"):c.available?(u.classList.add("asv-status-pill--up"),u.textContent="Âú®Á∫ø"):(u.classList.add("asv-status-pill--down"),u.textContent="Â∑≤ÂîÆÁΩÑ"),u}scheduleValidation(){if(!this.bootstrap.isAdmin||!this.currentConfig)return;this.availabilityTimer&&window.clearInterval(this.availabilityTimer);const c=this.currentConfig.listVps();if(!c.length)return;const u=c.map(m=>{var s;return((s=this.currentConfig)==null?void 0:s.getIntervalSeconds(m.vendor))??86400}),o=Math.max(60,Math.min(...u));this.availabilityTimer=window.setInterval(()=>{this.triggerAvailabilitySweep("ÂÆöÊó∂Â∑°Ê£Ä")},o*1e3)}triggerAvailabilitySweep(c){!this.bootstrap.isAdmin||this.inFlightValidation||(this.inFlightValidation=!0,this.logPanel.push(`${c}ÔºöÂºÄÂßãÈ™åËØÅÊâÄÊúâ VPS`),this.validateAll().catch(u=>this.logPanel.push(`ÊâπÈáèÈ™åËØÅÂ§±Ë¥•Ôºö${u.message}`,"error")).finally(()=>{this.inFlightValidation=!1}))}async validateAll(){var c;for(const u of this.currentVps){await this.validateSingle(u.vendor,u.pid,"ÊâπÈáèÈòüÂàó");const o=((c=this.currentConfig)==null?void 0:c.getDelayRange(u.vendor))??{min:5,max:10},m=this.randomDelay(o.min,o.max);await this.sleep(m)}}async validateSingle(c,u,o){try{const m=await this.rest.validateVps(c,u);this.logPanel.push(`${o}Ôºö${c} ${u} -> ${m.available?"Âú®Á∫ø":"ÂîÆÁΩÑ"} (${m.message})`),this.applyStatus(c,u,m.available,m.message,m.checked_at)}catch(m){this.logPanel.push(`È™åËØÅ ${c} ${u} Â§±Ë¥•Ôºö${m.message}`,"error")}}applyStatus(c,u,o,m,s){var a;const b=`${c}-${u}`,C=this.vpsContainer.querySelector(`[data-key="${b}"]`);if(C){C.classList.toggle("asv-card--offline",!o);const _=C.querySelector(".asv-status-pill");if(_&&(_.textContent=o?"Âú®Á∫ø":"Â∑≤ÂîÆÁΩÑ",_.className=`asv-status-pill ${o?"asv-status-pill--up":"asv-status-pill--down"}`),o)(a=C.querySelector(".asv-soldout"))==null||a.remove();else{let q=C.querySelector(".asv-soldout");q||(q=document.createElement("div"),q.className="asv-soldout",C.appendChild(q)),q.textContent=m||"ËØ• VPS ÊöÇ‰∏çÂèØÁî®"}}const w=this.currentVps.find(_=>_.vendor===c&&_.pid===u);w&&(w.available=o,w.message=m,w.checked_at=s??Date.now()/1e3)}async runDiagnostics(){try{const c=await this.rest.runDiagnostics();this.renderDiagnostics(c)}catch(c){this.logPanel.push(`ËØäÊñ≠Â§±Ë¥•Ôºö${c.message}`,"error")}}renderDiagnostics(c){this.logPanel.push(`ÁΩëÁªúÔºö${c.network.ok?"Ê≠£Â∏∏":"ÂºÇÂ∏∏"} - ${c.network.message}`),this.logPanel.push(`LLMÔºö${c.llm.ok?"Â∞±Áª™":"ÂºÇÂ∏∏"} - ${c.llm.message}`)}applyExtraCss(c){const u=(c||"").trim();if(!u){this.extraCssNode&&(this.extraCssNode.remove(),this.extraCssNode=void 0);return}if(!this.extraCssNode){const o=document.createElement("style");o.dataset.source="asv-extra-css",document.head.appendChild(o),this.extraCssNode=o}this.extraCssNode.textContent=u}randomDelay(c,u){const o=u-c;return(c+Math.random()*o)*1e3}sleep(c){return new Promise(u=>{window.setTimeout(u,c)})}}const Tt=window.ASV_BOOTSTRAP,Bt=document.getElementById("asv-root");Bt&&Tt?new Cr(Bt,Tt).init():console.warn("AutoSaleVPS: Áº∫Â∞ëÊåÇËΩΩËäÇÁÇπÊàñÂàùÂßãÂåñÊï∞ÊçÆ");
//# sourceMappingURL=main.js.map
