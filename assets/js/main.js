var lr=Object.defineProperty;var or=(V,f,h)=>f in V?lr(V,f,{enumerable:!0,configurable:!0,writable:!0,value:h}):V[f]=h;var M=(V,f,h)=>or(V,typeof f!="symbol"?f+"":f,h);class cr{constructor(f,h){M(this,"baseUrl");M(this,"nonce");this.baseUrl=f.replace(/\/$/,""),this.nonce=h}async request(f,h={}){const o=await fetch(`${this.baseUrl}/${f.replace(/^\//,"")}`,{headers:{"Content-Type":"application/json","X-WP-Nonce":this.nonce,...h.headers||{}},credentials:"same-origin",...h});if(!o.ok){const y=await o.text();throw new Error(y||"ËØ∑Ê±ÇÂ§±Ë¥•")}return o.status===204?{}:await o.json()}fetchConfig(){return this.request("/config")}saveConfig(f){return this.request("/config",{method:"POST",body:JSON.stringify({content:f})})}fetchModel(){return this.request("/model")}saveModel(f){return this.request("/model",{method:"POST",body:JSON.stringify({content:f})})}saveApiKey(f){return this.request("/key",{method:"POST",body:JSON.stringify({api_key:f})})}fetchVps(){return this.request("/vps")}validateVps(f,h){return this.request("/vps/validate",{method:"POST",body:JSON.stringify({vendor:f,pid:h})})}refreshPromo(f,h){return this.request("/vps/promo",{method:"POST",body:JSON.stringify({vendor:f,pid:h})})}runDiagnostics(){return this.request("/diagnostics",{method:"POST"})}saveTimezone(f){return this.request("/timezone",{method:"POST",body:JSON.stringify({timezone:f})})}}function fr(V){return V&&V.__esModule&&Object.prototype.hasOwnProperty.call(V,"default")?V.default:V}var ur=function(){function V(o,y){function r(){this.constructor=o}r.prototype=y.prototype,o.prototype=new r}function f(o,y,r,F,w,k){this.message=o,this.expected=y,this.found=r,this.offset=F,this.line=w,this.column=k,this.name="SyntaxError"}V(f,Error);function h(o){var y=arguments.length>1?arguments[1]:{},r={},F={start:ot},w=ot,k=function(){return Et},a=r,b="#",S={type:"literal",value:"#",description:'"#"'},O=void 0,H={type:"any",description:"any character"},z="[",te={type:"literal",value:"[",description:'"["'},Q="]",P={type:"literal",value:"]",description:'"]"'},C=function(e){Me(q("ObjectPath",e,j,R))},T=function(e){Me(q("ArrayPath",e,j,R))},N=function(e,s){return e.concat(s)},W=function(e){return[e]},B=function(e){return e},U=".",I={type:"literal",value:".",description:'"."'},X="=",ee={type:"literal",value:"=",description:'"="'},Ie=function(e,s){Me(q("Assign",s,j,R,e))},Vt=function(e){return e.join("")},Oe=function(e){return e.value},ie='"""',Pe={type:"literal",value:'"""',description:'"\\"\\"\\""'},re=null,ge=function(e){return q("String",e.join(""),j,R)},Ce='"',we={type:"literal",value:'"',description:'"\\""'},ne="'''",Ae={type:"literal",value:"'''",description:`"'''"`},be="'",_e={type:"literal",value:"'",description:`"'"`},Ee=function(e){return e},Lt=function(e){return e},Mt="\\",Dt={type:"literal",value:"\\",description:'"\\\\"'},It=function(){return""},Ot="e",Bt={type:"literal",value:"e",description:'"e"'},jt="E",Rt={type:"literal",value:"E",description:'"E"'},qt=function(e,s){return q("Float",parseFloat(e+"e"+s),j,R)},zt=function(e){return q("Float",parseFloat(e),j,R)},ke="+",Se={type:"literal",value:"+",description:'"+"'},Be=function(e){return e.join("")},oe="-",ce={type:"literal",value:"-",description:'"-"'},je=function(e){return"-"+e.join("")},Ut=function(e){return q("Integer",parseInt(e,10),j,R)},Re="true",Kt={type:"literal",value:"true",description:'"true"'},Zt=function(){return q("Boolean",!0,j,R)},qe="false",Ht={type:"literal",value:"false",description:'"false"'},Jt=function(){return q("Boolean",!1,j,R)},Yt=function(){return q("Array",[],j,R)},Gt=function(e){return q("Array",e?[e]:[],j,R)},Wt=function(e){return q("Array",e,j,R)},Xt=function(e,s){return q("Array",e.concat(s),j,R)},ze=function(e){return e},Ue=",",Ke={type:"literal",value:",",description:'","'},Qt="{",es={type:"literal",value:"{",description:'"{"'},ts="}",ss={type:"literal",value:"}",description:'"}"'},rs=function(e){return q("InlineTable",e,j,R)},Ze=function(e,s){return q("InlineTableValue",s,j,R,e)},is=function(e){return"."+e},ns=function(e){return e.join("")},fe=":",ue={type:"literal",value:":",description:'":"'},He=function(e){return e.join("")},Je="T",Ye={type:"literal",value:"T",description:'"T"'},as="Z",ls={type:"literal",value:"Z",description:'"Z"'},os=function(e,s){return q("Date",new Date(e+"T"+s+"Z"),j,R)},cs=function(e,s){return q("Date",new Date(e+"T"+s),j,R)},fs=/^[ \t]/,us={type:"class",value:"[ \\t]",description:"[ \\t]"},Ge=`
`,We={type:"literal",value:`
`,description:'"\\n"'},hs="\r",ps={type:"literal",value:"\r",description:'"\\r"'},ds=/^[0-9a-f]/i,gs={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},vs=/^[0-9]/,ms={type:"class",value:"[0-9]",description:"[0-9]"},ys="_",$s={type:"literal",value:"_",description:'"_"'},xs=function(){return""},Ps=/^[A-Za-z0-9_\-]/,Cs={type:"class",value:"[A-Za-z0-9_\\-]",description:"[A-Za-z0-9_\\-]"},ws=function(e){return e.join("")},Xe='\\"',As={type:"literal",value:'\\"',description:'"\\\\\\""'},bs=function(){return'"'},Qe="\\\\",_s={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},Es=function(){return"\\"},et="\\b",ks={type:"literal",value:"\\b",description:'"\\\\b"'},Ss=function(){return"\b"},tt="\\t",Ts={type:"literal",value:"\\t",description:'"\\\\t"'},Ns=function(){return"	"},st="\\n",Fs={type:"literal",value:"\\n",description:'"\\\\n"'},Vs=function(){return`
`},rt="\\f",Ls={type:"literal",value:"\\f",description:'"\\\\f"'},Ms=function(){return"\f"},it="\\r",Ds={type:"literal",value:"\\r",description:'"\\\\r"'},Is=function(){return"\r"},nt="\\U",Os={type:"literal",value:"\\U",description:'"\\\\U"'},at=function(e){return nr(e.join(""))},lt="\\u",Bs={type:"literal",value:"\\u",description:'"\\\\u"'},t=0,$=0,he=0,Te={line:1,column:1,seenCR:!1},ve=0,Ne=[],p=0,d={},me;if("startRule"in y){if(!(y.startRule in F))throw new Error(`Can't start parsing from rule "`+y.startRule+'".');w=F[y.startRule]}function j(){return Fe($).line}function R(){return Fe($).column}function Fe(e){function s(i,n,l){var c,u;for(c=n;c<l;c++)u=o.charAt(c),u===`
`?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):u==="\r"||u==="\u2028"||u==="\u2029"?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1)}return he!==e&&(he>e&&(he=0,Te={line:1,column:1,seenCR:!1}),s(Te,he,e),he=e),Te}function g(e){t<ve||(t>ve&&(ve=t,Ne=[]),Ne.push(e))}function js(e,s,i){function n(v){var x=1;for(v.sort(function(E,A){return E.description<A.description?-1:E.description>A.description?1:0});x<v.length;)v[x-1]===v[x]?v.splice(x,1):x++}function l(v,x){function E(le){function se(Z){return Z.charCodeAt(0).toString(16).toUpperCase()}return le.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(Z){return"\\x0"+se(Z)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(Z){return"\\x"+se(Z)}).replace(/[\u0180-\u0FFF]/g,function(Z){return"\\u0"+se(Z)}).replace(/[\u1080-\uFFFF]/g,function(Z){return"\\u"+se(Z)})}var A=new Array(v.length),L,D,K;for(K=0;K<v.length;K++)A[K]=v[K].description;return L=v.length>1?A.slice(0,-1).join(", ")+" or "+A[v.length-1]:A[0],D=x?'"'+E(x)+'"':"end of input","Expected "+L+" but "+D+" found."}var c=Fe(i),u=i<o.length?o.charAt(i):null;return s!==null&&n(s),new f(l(s,u),s,u,i,c.line,c.column)}function ot(){var e,s,i,n=t*49+0,l=d[n];if(l)return t=l.nextPos,l.result;for(e=t,s=[],i=ct();i!==r;)s.push(i),i=ct();return s!==r&&($=e,s=k()),e=s,d[n]={nextPos:t,result:e},e}function ct(){var e,s,i,n,l,c,u,v=t*49+1,x=d[v];if(x)return t=x.nextPos,x.result;for(e=t,s=[],i=m();i!==r;)s.push(i),i=m();if(s!==r)if(i=Rs(),i!==r){for(n=[],l=m();l!==r;)n.push(l),l=m();if(n!==r){for(l=[],c=ye();c!==r;)l.push(c),c=ye();if(l!==r){if(c=[],u=Y(),u!==r)for(;u!==r;)c.push(u),u=Y();else c=a;c===r&&(c=xe()),c!==r?(s=[s,i,n,l,c],e=s):(t=e,e=a)}else t=e,e=a}else t=e,e=a}else t=e,e=a;else t=e,e=a;if(e===r){if(e=t,s=[],i=m(),i!==r)for(;i!==r;)s.push(i),i=m();else s=a;if(s!==r){if(i=[],n=Y(),n!==r)for(;n!==r;)i.push(n),n=Y();else i=a;i===r&&(i=xe()),i!==r?(s=[s,i],e=s):(t=e,e=a)}else t=e,e=a;e===r&&(e=Y())}return d[v]={nextPos:t,result:e},e}function Rs(){var e,s=t*49+2,i=d[s];return i?(t=i.nextPos,i.result):(e=ye(),e===r&&(e=qs(),e===r&&(e=zs(),e===r&&(e=Us()))),d[s]={nextPos:t,result:e},e)}function ye(){var e,s,i,n,l,c,u=t*49+3,v=d[u];if(v)return t=v.nextPos,v.result;if(e=t,o.charCodeAt(t)===35?(s=b,t++):(s=r,p===0&&g(S)),s!==r){for(i=[],n=t,l=t,p++,c=Y(),c===r&&(c=xe()),p--,c===r?l=O:(t=l,l=a),l!==r?(o.length>t?(c=o.charAt(t),t++):(c=r,p===0&&g(H)),c!==r?(l=[l,c],n=l):(t=n,n=a)):(t=n,n=a);n!==r;)i.push(n),n=t,l=t,p++,c=Y(),c===r&&(c=xe()),p--,c===r?l=O:(t=l,l=a),l!==r?(o.length>t?(c=o.charAt(t),t++):(c=r,p===0&&g(H)),c!==r?(l=[l,c],n=l):(t=n,n=a)):(t=n,n=a);i!==r?(s=[s,i],e=s):(t=e,e=a)}else t=e,e=a;return d[u]={nextPos:t,result:e},e}function qs(){var e,s,i,n,l,c,u=t*49+4,v=d[u];if(v)return t=v.nextPos,v.result;if(e=t,o.charCodeAt(t)===91?(s=z,t++):(s=r,p===0&&g(te)),s!==r){for(i=[],n=m();n!==r;)i.push(n),n=m();if(i!==r)if(n=ft(),n!==r){for(l=[],c=m();c!==r;)l.push(c),c=m();l!==r?(o.charCodeAt(t)===93?(c=Q,t++):(c=r,p===0&&g(P)),c!==r?($=e,s=C(n),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;return d[u]={nextPos:t,result:e},e}function zs(){var e,s,i,n,l,c,u,v,x=t*49+5,E=d[x];if(E)return t=E.nextPos,E.result;if(e=t,o.charCodeAt(t)===91?(s=z,t++):(s=r,p===0&&g(te)),s!==r)if(o.charCodeAt(t)===91?(i=z,t++):(i=r,p===0&&g(te)),i!==r){for(n=[],l=m();l!==r;)n.push(l),l=m();if(n!==r)if(l=ft(),l!==r){for(c=[],u=m();u!==r;)c.push(u),u=m();c!==r?(o.charCodeAt(t)===93?(u=Q,t++):(u=r,p===0&&g(P)),u!==r?(o.charCodeAt(t)===93?(v=Q,t++):(v=r,p===0&&g(P)),v!==r?($=e,s=T(l),e=s):(t=e,e=a)):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a;return d[x]={nextPos:t,result:e},e}function ft(){var e,s,i,n=t*49+6,l=d[n];if(l)return t=l.nextPos,l.result;if(e=t,s=[],i=ht(),i!==r)for(;i!==r;)s.push(i),i=ht();else s=a;return s!==r?(i=ut(),i!==r?($=e,s=N(s,i),e=s):(t=e,e=a)):(t=e,e=a),e===r&&(e=t,s=ut(),s!==r&&($=e,s=W(s)),e=s),d[n]={nextPos:t,result:e},e}function ut(){var e,s,i,n,l,c=t*49+7,u=d[c];if(u)return t=u.nextPos,u.result;for(e=t,s=[],i=m();i!==r;)s.push(i),i=m();if(s!==r)if(i=pe(),i!==r){for(n=[],l=m();l!==r;)n.push(l),l=m();n!==r?($=e,s=B(i),e=s):(t=e,e=a)}else t=e,e=a;else t=e,e=a;if(e===r){for(e=t,s=[],i=m();i!==r;)s.push(i),i=m();if(s!==r)if(i=Ve(),i!==r){for(n=[],l=m();l!==r;)n.push(l),l=m();n!==r?($=e,s=B(i),e=s):(t=e,e=a)}else t=e,e=a;else t=e,e=a}return d[c]={nextPos:t,result:e},e}function ht(){var e,s,i,n,l,c,u,v=t*49+8,x=d[v];if(x)return t=x.nextPos,x.result;for(e=t,s=[],i=m();i!==r;)s.push(i),i=m();if(s!==r)if(i=pe(),i!==r){for(n=[],l=m();l!==r;)n.push(l),l=m();if(n!==r)if(o.charCodeAt(t)===46?(l=U,t++):(l=r,p===0&&g(I)),l!==r){for(c=[],u=m();u!==r;)c.push(u),u=m();c!==r?($=e,s=B(i),e=s):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a;if(e===r){for(e=t,s=[],i=m();i!==r;)s.push(i),i=m();if(s!==r)if(i=Ve(),i!==r){for(n=[],l=m();l!==r;)n.push(l),l=m();if(n!==r)if(o.charCodeAt(t)===46?(l=U,t++):(l=r,p===0&&g(I)),l!==r){for(c=[],u=m();u!==r;)c.push(u),u=m();c!==r?($=e,s=B(i),e=s):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a}return d[v]={nextPos:t,result:e},e}function Us(){var e,s,i,n,l,c,u=t*49+9,v=d[u];if(v)return t=v.nextPos,v.result;if(e=t,s=pe(),s!==r){for(i=[],n=m();n!==r;)i.push(n),n=m();if(i!==r)if(o.charCodeAt(t)===61?(n=X,t++):(n=r,p===0&&g(ee)),n!==r){for(l=[],c=m();c!==r;)l.push(c),c=m();l!==r?(c=ae(),c!==r?($=e,s=Ie(s,c),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;if(e===r)if(e=t,s=Ve(),s!==r){for(i=[],n=m();n!==r;)i.push(n),n=m();if(i!==r)if(o.charCodeAt(t)===61?(n=X,t++):(n=r,p===0&&g(ee)),n!==r){for(l=[],c=m();c!==r;)l.push(c),c=m();l!==r?(c=ae(),c!==r?($=e,s=Ie(s,c),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;return d[u]={nextPos:t,result:e},e}function pe(){var e,s,i,n=t*49+10,l=d[n];if(l)return t=l.nextPos,l.result;if(e=t,s=[],i=bt(),i!==r)for(;i!==r;)s.push(i),i=bt();else s=a;return s!==r&&($=e,s=Vt(s)),e=s,d[n]={nextPos:t,result:e},e}function Ve(){var e,s,i=t*49+11,n=d[i];return n?(t=n.nextPos,n.result):(e=t,s=pt(),s!==r&&($=e,s=Oe(s)),e=s,e===r&&(e=t,s=dt(),s!==r&&($=e,s=Oe(s)),e=s),d[i]={nextPos:t,result:e},e)}function ae(){var e,s=t*49+12,i=d[s];return i?(t=i.nextPos,i.result):(e=Ks(),e===r&&(e=sr(),e===r&&(e=Ys(),e===r&&(e=Gs(),e===r&&(e=Ws(),e===r&&(e=Xs(),e===r&&(e=Qs())))))),d[s]={nextPos:t,result:e},e)}function Ks(){var e,s=t*49+13,i=d[s];return i?(t=i.nextPos,i.result):(e=Zs(),e===r&&(e=pt(),e===r&&(e=Hs(),e===r&&(e=dt()))),d[s]={nextPos:t,result:e},e)}function Zs(){var e,s,i,n,l,c=t*49+14,u=d[c];if(u)return t=u.nextPos,u.result;if(e=t,o.substr(t,3)===ie?(s=ie,t+=3):(s=r,p===0&&g(Pe)),s!==r)if(i=Y(),i===r&&(i=re),i!==r){for(n=[],l=mt();l!==r;)n.push(l),l=mt();n!==r?(o.substr(t,3)===ie?(l=ie,t+=3):(l=r,p===0&&g(Pe)),l!==r?($=e,s=ge(n),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a;return d[c]={nextPos:t,result:e},e}function pt(){var e,s,i,n,l=t*49+15,c=d[l];if(c)return t=c.nextPos,c.result;if(e=t,o.charCodeAt(t)===34?(s=Ce,t++):(s=r,p===0&&g(we)),s!==r){for(i=[],n=gt();n!==r;)i.push(n),n=gt();i!==r?(o.charCodeAt(t)===34?(n=Ce,t++):(n=r,p===0&&g(we)),n!==r?($=e,s=ge(i),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;return d[l]={nextPos:t,result:e},e}function Hs(){var e,s,i,n,l,c=t*49+16,u=d[c];if(u)return t=u.nextPos,u.result;if(e=t,o.substr(t,3)===ne?(s=ne,t+=3):(s=r,p===0&&g(Ae)),s!==r)if(i=Y(),i===r&&(i=re),i!==r){for(n=[],l=yt();l!==r;)n.push(l),l=yt();n!==r?(o.substr(t,3)===ne?(l=ne,t+=3):(l=r,p===0&&g(Ae)),l!==r?($=e,s=ge(n),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a;return d[c]={nextPos:t,result:e},e}function dt(){var e,s,i,n,l=t*49+17,c=d[l];if(c)return t=c.nextPos,c.result;if(e=t,o.charCodeAt(t)===39?(s=be,t++):(s=r,p===0&&g(_e)),s!==r){for(i=[],n=vt();n!==r;)i.push(n),n=vt();i!==r?(o.charCodeAt(t)===39?(n=be,t++):(n=r,p===0&&g(_e)),n!==r?($=e,s=ge(i),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;return d[l]={nextPos:t,result:e},e}function gt(){var e,s,i,n=t*49+18,l=d[n];return l?(t=l.nextPos,l.result):(e=_t(),e===r&&(e=t,s=t,p++,o.charCodeAt(t)===34?(i=Ce,t++):(i=r,p===0&&g(we)),p--,i===r?s=O:(t=s,s=a),s!==r?(o.length>t?(i=o.charAt(t),t++):(i=r,p===0&&g(H)),i!==r?($=e,s=Ee(i),e=s):(t=e,e=a)):(t=e,e=a)),d[n]={nextPos:t,result:e},e)}function vt(){var e,s,i,n=t*49+19,l=d[n];return l?(t=l.nextPos,l.result):(e=t,s=t,p++,o.charCodeAt(t)===39?(i=be,t++):(i=r,p===0&&g(_e)),p--,i===r?s=O:(t=s,s=a),s!==r?(o.length>t?(i=o.charAt(t),t++):(i=r,p===0&&g(H)),i!==r?($=e,s=Ee(i),e=s):(t=e,e=a)):(t=e,e=a),d[n]={nextPos:t,result:e},e)}function mt(){var e,s,i,n=t*49+20,l=d[n];return l?(t=l.nextPos,l.result):(e=_t(),e===r&&(e=Js(),e===r&&(e=t,s=t,p++,o.substr(t,3)===ie?(i=ie,t+=3):(i=r,p===0&&g(Pe)),p--,i===r?s=O:(t=s,s=a),s!==r?(o.length>t?(i=o.charAt(t),t++):(i=r,p===0&&g(H)),i!==r?($=e,s=Lt(i),e=s):(t=e,e=a)):(t=e,e=a))),d[n]={nextPos:t,result:e},e)}function Js(){var e,s,i,n,l,c=t*49+21,u=d[c];if(u)return t=u.nextPos,u.result;if(e=t,o.charCodeAt(t)===92?(s=Mt,t++):(s=r,p===0&&g(Dt)),s!==r)if(i=Y(),i!==r){for(n=[],l=At();l!==r;)n.push(l),l=At();n!==r?($=e,s=It(),e=s):(t=e,e=a)}else t=e,e=a;else t=e,e=a;return d[c]={nextPos:t,result:e},e}function yt(){var e,s,i,n=t*49+22,l=d[n];return l?(t=l.nextPos,l.result):(e=t,s=t,p++,o.substr(t,3)===ne?(i=ne,t+=3):(i=r,p===0&&g(Ae)),p--,i===r?s=O:(t=s,s=a),s!==r?(o.length>t?(i=o.charAt(t),t++):(i=r,p===0&&g(H)),i!==r?($=e,s=Ee(i),e=s):(t=e,e=a)):(t=e,e=a),d[n]={nextPos:t,result:e},e)}function Ys(){var e,s,i,n,l=t*49+23,c=d[l];return c?(t=c.nextPos,c.result):(e=t,s=$t(),s===r&&(s=Le()),s!==r?(o.charCodeAt(t)===101?(i=Ot,t++):(i=r,p===0&&g(Bt)),i===r&&(o.charCodeAt(t)===69?(i=jt,t++):(i=r,p===0&&g(Rt))),i!==r?(n=Le(),n!==r?($=e,s=qt(s,n),e=s):(t=e,e=a)):(t=e,e=a)):(t=e,e=a),e===r&&(e=t,s=$t(),s!==r&&($=e,s=zt(s)),e=s),d[l]={nextPos:t,result:e},e)}function $t(){var e,s,i,n,l,c,u=t*49+24,v=d[u];return v?(t=v.nextPos,v.result):(e=t,o.charCodeAt(t)===43?(s=ke,t++):(s=r,p===0&&g(Se)),s===r&&(s=re),s!==r?(i=t,n=de(),n!==r?(o.charCodeAt(t)===46?(l=U,t++):(l=r,p===0&&g(I)),l!==r?(c=de(),c!==r?(n=[n,l,c],i=n):(t=i,i=a)):(t=i,i=a)):(t=i,i=a),i!==r?($=e,s=Be(i),e=s):(t=e,e=a)):(t=e,e=a),e===r&&(e=t,o.charCodeAt(t)===45?(s=oe,t++):(s=r,p===0&&g(ce)),s!==r?(i=t,n=de(),n!==r?(o.charCodeAt(t)===46?(l=U,t++):(l=r,p===0&&g(I)),l!==r?(c=de(),c!==r?(n=[n,l,c],i=n):(t=i,i=a)):(t=i,i=a)):(t=i,i=a),i!==r?($=e,s=je(i),e=s):(t=e,e=a)):(t=e,e=a)),d[u]={nextPos:t,result:e},e)}function Gs(){var e,s,i=t*49+25,n=d[i];return n?(t=n.nextPos,n.result):(e=t,s=Le(),s!==r&&($=e,s=Ut(s)),e=s,d[i]={nextPos:t,result:e},e)}function Le(){var e,s,i,n,l,c=t*49+26,u=d[c];if(u)return t=u.nextPos,u.result;if(e=t,o.charCodeAt(t)===43?(s=ke,t++):(s=r,p===0&&g(Se)),s===r&&(s=re),s!==r){if(i=[],n=_(),n!==r)for(;n!==r;)i.push(n),n=_();else i=a;i!==r?(n=t,p++,o.charCodeAt(t)===46?(l=U,t++):(l=r,p===0&&g(I)),p--,l===r?n=O:(t=n,n=a),n!==r?($=e,s=Be(i),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;if(e===r)if(e=t,o.charCodeAt(t)===45?(s=oe,t++):(s=r,p===0&&g(ce)),s!==r){if(i=[],n=_(),n!==r)for(;n!==r;)i.push(n),n=_();else i=a;i!==r?(n=t,p++,o.charCodeAt(t)===46?(l=U,t++):(l=r,p===0&&g(I)),p--,l===r?n=O:(t=n,n=a),n!==r?($=e,s=je(i),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;return d[c]={nextPos:t,result:e},e}function Ws(){var e,s,i=t*49+27,n=d[i];return n?(t=n.nextPos,n.result):(e=t,o.substr(t,4)===Re?(s=Re,t+=4):(s=r,p===0&&g(Kt)),s!==r&&($=e,s=Zt()),e=s,e===r&&(e=t,o.substr(t,5)===qe?(s=qe,t+=5):(s=r,p===0&&g(Ht)),s!==r&&($=e,s=Jt()),e=s),d[i]={nextPos:t,result:e},e)}function Xs(){var e,s,i,n,l,c=t*49+28,u=d[c];if(u)return t=u.nextPos,u.result;if(e=t,o.charCodeAt(t)===91?(s=z,t++):(s=r,p===0&&g(te)),s!==r){for(i=[],n=J();n!==r;)i.push(n),n=J();i!==r?(o.charCodeAt(t)===93?(n=Q,t++):(n=r,p===0&&g(P)),n!==r?($=e,s=Yt(),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;if(e===r&&(e=t,o.charCodeAt(t)===91?(s=z,t++):(s=r,p===0&&g(te)),s!==r?(i=xt(),i===r&&(i=re),i!==r?(o.charCodeAt(t)===93?(n=Q,t++):(n=r,p===0&&g(P)),n!==r?($=e,s=Gt(i),e=s):(t=e,e=a)):(t=e,e=a)):(t=e,e=a),e===r)){if(e=t,o.charCodeAt(t)===91?(s=z,t++):(s=r,p===0&&g(te)),s!==r){if(i=[],n=$e(),n!==r)for(;n!==r;)i.push(n),n=$e();else i=a;i!==r?(o.charCodeAt(t)===93?(n=Q,t++):(n=r,p===0&&g(P)),n!==r?($=e,s=Wt(i),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;if(e===r)if(e=t,o.charCodeAt(t)===91?(s=z,t++):(s=r,p===0&&g(te)),s!==r){if(i=[],n=$e(),n!==r)for(;n!==r;)i.push(n),n=$e();else i=a;i!==r?(n=xt(),n!==r?(o.charCodeAt(t)===93?(l=Q,t++):(l=r,p===0&&g(P)),l!==r?($=e,s=Xt(i,n),e=s):(t=e,e=a)):(t=e,e=a)):(t=e,e=a)}else t=e,e=a}return d[c]={nextPos:t,result:e},e}function xt(){var e,s,i,n,l,c=t*49+29,u=d[c];if(u)return t=u.nextPos,u.result;for(e=t,s=[],i=J();i!==r;)s.push(i),i=J();if(s!==r)if(i=ae(),i!==r){for(n=[],l=J();l!==r;)n.push(l),l=J();n!==r?($=e,s=ze(i),e=s):(t=e,e=a)}else t=e,e=a;else t=e,e=a;return d[c]={nextPos:t,result:e},e}function $e(){var e,s,i,n,l,c,u,v=t*49+30,x=d[v];if(x)return t=x.nextPos,x.result;for(e=t,s=[],i=J();i!==r;)s.push(i),i=J();if(s!==r)if(i=ae(),i!==r){for(n=[],l=J();l!==r;)n.push(l),l=J();if(n!==r)if(o.charCodeAt(t)===44?(l=Ue,t++):(l=r,p===0&&g(Ke)),l!==r){for(c=[],u=J();u!==r;)c.push(u),u=J();c!==r?($=e,s=ze(i),e=s):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a;return d[v]={nextPos:t,result:e},e}function J(){var e,s=t*49+31,i=d[s];return i?(t=i.nextPos,i.result):(e=m(),e===r&&(e=Y(),e===r&&(e=ye())),d[s]={nextPos:t,result:e},e)}function Qs(){var e,s,i,n,l,c,u=t*49+32,v=d[u];if(v)return t=v.nextPos,v.result;if(e=t,o.charCodeAt(t)===123?(s=Qt,t++):(s=r,p===0&&g(es)),s!==r){for(i=[],n=m();n!==r;)i.push(n),n=m();if(i!==r){for(n=[],l=Pt();l!==r;)n.push(l),l=Pt();if(n!==r){for(l=[],c=m();c!==r;)l.push(c),c=m();l!==r?(o.charCodeAt(t)===125?(c=ts,t++):(c=r,p===0&&g(ss)),c!==r?($=e,s=rs(n),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a}else t=e,e=a}else t=e,e=a;return d[u]={nextPos:t,result:e},e}function Pt(){var e,s,i,n,l,c,u,v,x,E,A,L=t*49+33,D=d[L];if(D)return t=D.nextPos,D.result;for(e=t,s=[],i=m();i!==r;)s.push(i),i=m();if(s!==r)if(i=pe(),i!==r){for(n=[],l=m();l!==r;)n.push(l),l=m();if(n!==r)if(o.charCodeAt(t)===61?(l=X,t++):(l=r,p===0&&g(ee)),l!==r){for(c=[],u=m();u!==r;)c.push(u),u=m();if(c!==r)if(u=ae(),u!==r){for(v=[],x=m();x!==r;)v.push(x),x=m();if(v!==r)if(o.charCodeAt(t)===44?(x=Ue,t++):(x=r,p===0&&g(Ke)),x!==r){for(E=[],A=m();A!==r;)E.push(A),A=m();E!==r?($=e,s=Ze(i,u),e=s):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a;if(e===r){for(e=t,s=[],i=m();i!==r;)s.push(i),i=m();if(s!==r)if(i=pe(),i!==r){for(n=[],l=m();l!==r;)n.push(l),l=m();if(n!==r)if(o.charCodeAt(t)===61?(l=X,t++):(l=r,p===0&&g(ee)),l!==r){for(c=[],u=m();u!==r;)c.push(u),u=m();c!==r?(u=ae(),u!==r?($=e,s=Ze(i,u),e=s):(t=e,e=a)):(t=e,e=a)}else t=e,e=a;else t=e,e=a}else t=e,e=a;else t=e,e=a}return d[L]={nextPos:t,result:e},e}function Ct(){var e,s,i,n=t*49+34,l=d[n];return l?(t=l.nextPos,l.result):(e=t,o.charCodeAt(t)===46?(s=U,t++):(s=r,p===0&&g(I)),s!==r?(i=de(),i!==r?($=e,s=is(i),e=s):(t=e,e=a)):(t=e,e=a),d[n]={nextPos:t,result:e},e)}function wt(){var e,s,i,n,l,c,u,v,x,E,A,L,D=t*49+35,K=d[D];return K?(t=K.nextPos,K.result):(e=t,s=t,i=_(),i!==r?(n=_(),n!==r?(l=_(),l!==r?(c=_(),c!==r?(o.charCodeAt(t)===45?(u=oe,t++):(u=r,p===0&&g(ce)),u!==r?(v=_(),v!==r?(x=_(),x!==r?(o.charCodeAt(t)===45?(E=oe,t++):(E=r,p===0&&g(ce)),E!==r?(A=_(),A!==r?(L=_(),L!==r?(i=[i,n,l,c,u,v,x,E,A,L],s=i):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a),s!==r&&($=e,s=ns(s)),e=s,d[D]={nextPos:t,result:e},e)}function er(){var e,s,i,n,l,c,u,v,x,E,A,L=t*49+36,D=d[L];return D?(t=D.nextPos,D.result):(e=t,s=t,i=_(),i!==r?(n=_(),n!==r?(o.charCodeAt(t)===58?(l=fe,t++):(l=r,p===0&&g(ue)),l!==r?(c=_(),c!==r?(u=_(),u!==r?(o.charCodeAt(t)===58?(v=fe,t++):(v=r,p===0&&g(ue)),v!==r?(x=_(),x!==r?(E=_(),E!==r?(A=Ct(),A===r&&(A=re),A!==r?(i=[i,n,l,c,u,v,x,E,A],s=i):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a),s!==r&&($=e,s=He(s)),e=s,d[L]={nextPos:t,result:e},e)}function tr(){var e,s,i,n,l,c,u,v,x,E,A,L,D,K,le,se,Z,kt=t*49+37,De=d[kt];return De?(t=De.nextPos,De.result):(e=t,s=t,i=_(),i!==r?(n=_(),n!==r?(o.charCodeAt(t)===58?(l=fe,t++):(l=r,p===0&&g(ue)),l!==r?(c=_(),c!==r?(u=_(),u!==r?(o.charCodeAt(t)===58?(v=fe,t++):(v=r,p===0&&g(ue)),v!==r?(x=_(),x!==r?(E=_(),E!==r?(A=Ct(),A===r&&(A=re),A!==r?(o.charCodeAt(t)===45?(L=oe,t++):(L=r,p===0&&g(ce)),L===r&&(o.charCodeAt(t)===43?(L=ke,t++):(L=r,p===0&&g(Se))),L!==r?(D=_(),D!==r?(K=_(),K!==r?(o.charCodeAt(t)===58?(le=fe,t++):(le=r,p===0&&g(ue)),le!==r?(se=_(),se!==r?(Z=_(),Z!==r?(i=[i,n,l,c,u,v,x,E,A,L,D,K,le,se,Z],s=i):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a)):(t=s,s=a),s!==r&&($=e,s=He(s)),e=s,d[kt]={nextPos:t,result:e},e)}function sr(){var e,s,i,n,l,c=t*49+38,u=d[c];return u?(t=u.nextPos,u.result):(e=t,s=wt(),s!==r?(o.charCodeAt(t)===84?(i=Je,t++):(i=r,p===0&&g(Ye)),i!==r?(n=er(),n!==r?(o.charCodeAt(t)===90?(l=as,t++):(l=r,p===0&&g(ls)),l!==r?($=e,s=os(s,n),e=s):(t=e,e=a)):(t=e,e=a)):(t=e,e=a)):(t=e,e=a),e===r&&(e=t,s=wt(),s!==r?(o.charCodeAt(t)===84?(i=Je,t++):(i=r,p===0&&g(Ye)),i!==r?(n=tr(),n!==r?($=e,s=cs(s,n),e=s):(t=e,e=a)):(t=e,e=a)):(t=e,e=a)),d[c]={nextPos:t,result:e},e)}function m(){var e,s=t*49+39,i=d[s];return i?(t=i.nextPos,i.result):(fs.test(o.charAt(t))?(e=o.charAt(t),t++):(e=r,p===0&&g(us)),d[s]={nextPos:t,result:e},e)}function Y(){var e,s,i,n=t*49+40,l=d[n];return l?(t=l.nextPos,l.result):(o.charCodeAt(t)===10?(e=Ge,t++):(e=r,p===0&&g(We)),e===r&&(e=t,o.charCodeAt(t)===13?(s=hs,t++):(s=r,p===0&&g(ps)),s!==r?(o.charCodeAt(t)===10?(i=Ge,t++):(i=r,p===0&&g(We)),i!==r?(s=[s,i],e=s):(t=e,e=a)):(t=e,e=a)),d[n]={nextPos:t,result:e},e)}function At(){var e,s=t*49+41,i=d[s];return i?(t=i.nextPos,i.result):(e=Y(),e===r&&(e=m()),d[s]={nextPos:t,result:e},e)}function xe(){var e,s,i=t*49+42,n=d[i];return n?(t=n.nextPos,n.result):(e=t,p++,o.length>t?(s=o.charAt(t),t++):(s=r,p===0&&g(H)),p--,s===r?e=O:(t=e,e=a),d[i]={nextPos:t,result:e},e)}function G(){var e,s=t*49+43,i=d[s];return i?(t=i.nextPos,i.result):(ds.test(o.charAt(t))?(e=o.charAt(t),t++):(e=r,p===0&&g(gs)),d[s]={nextPos:t,result:e},e)}function _(){var e,s,i=t*49+44,n=d[i];return n?(t=n.nextPos,n.result):(vs.test(o.charAt(t))?(e=o.charAt(t),t++):(e=r,p===0&&g(ms)),e===r&&(e=t,o.charCodeAt(t)===95?(s=ys,t++):(s=r,p===0&&g($s)),s!==r&&($=e,s=xs()),e=s),d[i]={nextPos:t,result:e},e)}function bt(){var e,s=t*49+45,i=d[s];return i?(t=i.nextPos,i.result):(Ps.test(o.charAt(t))?(e=o.charAt(t),t++):(e=r,p===0&&g(Cs)),d[s]={nextPos:t,result:e},e)}function de(){var e,s,i,n=t*49+46,l=d[n];if(l)return t=l.nextPos,l.result;if(e=t,s=[],i=_(),i!==r)for(;i!==r;)s.push(i),i=_();else s=a;return s!==r&&($=e,s=ws(s)),e=s,d[n]={nextPos:t,result:e},e}function _t(){var e,s,i=t*49+47,n=d[i];return n?(t=n.nextPos,n.result):(e=t,o.substr(t,2)===Xe?(s=Xe,t+=2):(s=r,p===0&&g(As)),s!==r&&($=e,s=bs()),e=s,e===r&&(e=t,o.substr(t,2)===Qe?(s=Qe,t+=2):(s=r,p===0&&g(_s)),s!==r&&($=e,s=Es()),e=s,e===r&&(e=t,o.substr(t,2)===et?(s=et,t+=2):(s=r,p===0&&g(ks)),s!==r&&($=e,s=Ss()),e=s,e===r&&(e=t,o.substr(t,2)===tt?(s=tt,t+=2):(s=r,p===0&&g(Ts)),s!==r&&($=e,s=Ns()),e=s,e===r&&(e=t,o.substr(t,2)===st?(s=st,t+=2):(s=r,p===0&&g(Fs)),s!==r&&($=e,s=Vs()),e=s,e===r&&(e=t,o.substr(t,2)===rt?(s=rt,t+=2):(s=r,p===0&&g(Ls)),s!==r&&($=e,s=Ms()),e=s,e===r&&(e=t,o.substr(t,2)===it?(s=it,t+=2):(s=r,p===0&&g(Ds)),s!==r&&($=e,s=Is()),e=s,e===r&&(e=rr()))))))),d[i]={nextPos:t,result:e},e)}function rr(){var e,s,i,n,l,c,u,v,x,E,A,L=t*49+48,D=d[L];return D?(t=D.nextPos,D.result):(e=t,o.substr(t,2)===nt?(s=nt,t+=2):(s=r,p===0&&g(Os)),s!==r?(i=t,n=G(),n!==r?(l=G(),l!==r?(c=G(),c!==r?(u=G(),u!==r?(v=G(),v!==r?(x=G(),x!==r?(E=G(),E!==r?(A=G(),A!==r?(n=[n,l,c,u,v,x,E,A],i=n):(t=i,i=a)):(t=i,i=a)):(t=i,i=a)):(t=i,i=a)):(t=i,i=a)):(t=i,i=a)):(t=i,i=a)):(t=i,i=a),i!==r?($=e,s=at(i),e=s):(t=e,e=a)):(t=e,e=a),e===r&&(e=t,o.substr(t,2)===lt?(s=lt,t+=2):(s=r,p===0&&g(Bs)),s!==r?(i=t,n=G(),n!==r?(l=G(),l!==r?(c=G(),c!==r?(u=G(),u!==r?(n=[n,l,c,u],i=n):(t=i,i=a)):(t=i,i=a)):(t=i,i=a)):(t=i,i=a),i!==r?($=e,s=at(i),e=s):(t=e,e=a)):(t=e,e=a)),d[L]={nextPos:t,result:e},e)}var Et=[];function ir(e,s,i){var n=new Error(e);throw n.line=s,n.column=i,n}function Me(e){Et.push(e)}function q(e,s,i,n,l){var c={type:e,value:s,line:i(),column:n()};return l&&(c.key=l),c}function nr(e,s,i){var n=parseInt("0x"+e);if(!isFinite(n)||Math.floor(n)!=n||n<0||n>1114111||n>55295&&n<57344)ir("Invalid Unicode escape code: "+e,s,i);else return ar(n)}function ar(){var e=16384,s=[],i,n,l=-1,c=arguments.length;if(!c)return"";for(var u="";++l<c;){var v=Number(arguments[l]);v<=65535?s.push(v):(v-=65536,i=(v>>10)+55296,n=v%1024+56320,s.push(i,n)),(l+1==c||s.length>e)&&(u+=String.fromCharCode.apply(null,s),s.length=0)}return u}if(me=w(),me!==r&&t===o.length)return me;throw me!==r&&t<o.length&&g({type:"end",description:"end of input"}),js(null,Ne,ve)}return{SyntaxError:f,parse:h}}();function hr(V){var f=[],h=[],o="",y=Object.create(null),r=y;return F(V);function F(P){for(var C,T=0;T<P.length;T++)switch(C=P[T],C.type){case"Assign":k(C);break;case"ObjectPath":O(C);break;case"ArrayPath":H(C);break}return y}function w(P,C,T){var N=new Error(P);throw N.line=C,N.column=T,N}function k(P){var C=P.key,T=P.value,N=P.line,W=P.column,B;o?B=o+"."+C:B=C,typeof r[C]<"u"&&w("Cannot redefine existing key '"+B+"'.",N,W),r[C]=b(T),a(B)||(f.push(B),h.push(B))}function a(P){return f.indexOf(P)!==-1}function b(P){return P.type==="Array"?te(P.value):P.type==="InlineTable"?S(P.value):P.value}function S(P){for(var C=Object.create(null),T=0;T<P.length;T++){var N=P[T];N.value.type==="InlineTable"?C[N.key]=S(N.value.value):N.type==="InlineTableValue"&&(C[N.key]=b(N.value))}return C}function O(P){var C=P.value,T=C.map(Q).join("."),N=P.line,W=P.column;a(T)&&w("Cannot redefine existing key '"+C+"'.",N,W),f.push(T),r=z(y,C,Object.create(null),N,W),o=C}function H(P){var C=P.value,T=C.map(Q).join("."),N=P.line,W=P.column;if(a(T)||f.push(T),f=f.filter(function(U){return U.indexOf(T)!==0}),f.push(T),r=z(y,C,[],N,W),o=T,r instanceof Array){var B=Object.create(null);r.push(B),r=B}else w("Cannot redefine existing key '"+C+"'.",N,W)}function z(P,C,T,N,W){var B=[],U="";C.join(".");for(var I=P,X=0;X<C.length;X++){var ee=C[X];B.push(ee),U=B.join("."),typeof I[ee]>"u"?X===C.length-1?I[ee]=T:I[ee]=Object.create(null):X!==C.length-1&&h.indexOf(U)>-1&&w("Cannot redefine existing key '"+U+"'.",N,W),I=I[ee],I instanceof Array&&I.length&&X<C.length-1&&(I=I[I.length-1])}return I}function te(P){for(var C=null,T=0;T<P.length;T++){var N=P[T];C===null?C=N.type:N.type!==C&&w("Cannot add value of type "+N.type+" to array of type "+C+".",N.line,N.column)}return P.map(b)}function Q(P){return P.indexOf(".")>-1?'"'+P+'"':P}}var pr={compile:hr},dr=ur,gr=pr,vr={parse:function(V){var f=dr.parse(V.toString());return gr.compile(f)}};const mr=fr(vr);class St{constructor(f){M(this,"raw");M(this,"tree");this.raw=f;try{this.tree=mr.parse(f)||{}}catch(h){console.error("TOML parse error",h),this.tree={}}}getRaw(){return this.raw}listVps(){const f=this.tree.aff??{},h=this.tree.url??{},o=this.tree.vps??{},y=[];return Object.entries(o).forEach(([r,F])=>{Object.entries(F).forEach(([w,k])=>{var H,z;const a=k.pid||w,b=((H=h[r])==null?void 0:H.sale_format)??"",S=((z=h[r])==null?void 0:z.valid_format)??"",O=this.resolveAffCode(f[r]);y.push({vendor:r,pid:a,humanComment:k.human_comment||"",saleUrl:this.fillTemplate(b,O,a),validUrl:this.fillTemplate(S,O,a)})})}),y}getIntervalSeconds(f){var o,y;const h=(y=(o=this.tree.url)==null?void 0:o[f])==null?void 0:y.valid_interval_time;return h?Number(h):86400}getDelayRange(f){var w,k;const h=((k=(w=this.tree.url)==null?void 0:w[f])==null?void 0:k.valid_vps_time)??"5-10";if(!h.includes("-")){const a=Math.max(1,Number(h));return{min:a,max:a}}const[o,y]=h.split("-"),r=Math.max(1,Number(o)),F=Math.max(r,Number(y));return{min:r,max:F}}resolveAffCode(f){return f?f.code??Object.values(f).join(""):""}fillTemplate(f,h,o){return f?f.replace("{aff}",encodeURIComponent(h)).replace("{pid}",encodeURIComponent(o)):""}}class Tt{constructor(f,h){M(this,"element");this.element=document.createElement("div"),this.element.className="asv-modal hidden";const o=document.createElement("div");o.className="asv-modal__body";const y=document.createElement("header");y.className="asv-modal__header",y.innerHTML=`<h3>${f}</h3>`;const r=document.createElement("button");r.className="asv-modal__close",r.type="button",r.textContent="√ó",r.addEventListener("click",()=>this.hide()),y.appendChild(r),o.appendChild(y),o.appendChild(h),this.element.appendChild(o)}mount(f){f.appendChild(this.element)}show(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}getNode(){return this.element}}class yr{constructor(f,h){M(this,"node");M(this,"timezone");this.node=f,this.timezone=h}setTimezone(f){this.timezone=f}push(f,h="info"){const o=this.formatTime(),y=document.createElement("div");y.className=`asv-log-row asv-log-${h}`,y.textContent=`[${o}] ${f}`,this.node.prepend(y)}formatTime(){try{return new Date().toLocaleString("zh-CN",{timeZone:this.timezone,hour12:!1})}catch(f){return console.warn("timezone fallback",f),new Date().toLocaleString()}}}const $r=`[aff]
[aff.rn]
4886

[url]
[url.rn]
sale_format = 'https://my.racknerd.com/aff.php?aff={aff}&pid={pid}'
valid_format = 'https://my.racknerd.com/cart.php?a=add&pid={pid}'
valid_interval_time = '172800'
valid_vps_time = '5-10'

[vps]
[vps.rn.923]
pid = '923'
human_comment = 'ÈùûÂ∏∏Âü∫Á°ÄÁöÑ‰∏ÄÊ¨æVPSÔºå‰ΩÜÊòØÂÆπÈáèÁõ∏ÂØπÊù•ËØ¥ËøòÊòØÊØîËæÉÂ§ßÁöÑ„ÄÇ'

[vps.rn.924]
pid = '924'
human_comment = ''

[vps.rn.925]
pid = '925'
human_comment = ''

[vps.rn.926]
pid = '926'
human_comment = ''

[vps.rn.927]
pid = '927'
human_comment = ''`,xr=`[model_providers]
[model_providers.omg]
base_url = 'https://api.ohmygpt.com/v1'
prompt_valid = 'Âü∫‰∫éËæìÂÖ•Âà§Êñ≠VPSÊòØÂê¶Â∑≤ÁªèÂçñÂÆåÊàñ‰∏ãÊû∂ÔºõÂ¶ÇÊûúÂ∑≤ÁªèÂçñÂÆåÊàñ‰∏ãÊû∂ÔºåËØ∑ËøîÂõûFALSEÔºõÂê¶ÂàôÔºåËØ∑ËøîÂõûTRUE'
prompt_vps_info = 'Âü∫‰∫éËæìÂÖ•ÁªôÂá∫‰∏ÄÊñ≠Êé®ÈîÄVPSÁöÑÂπøÂëäÔºå20-100‰∏™ÁÆÄ‰Ωì‰∏≠Êñá„ÄÇÊé®ÂπøË¶ÅÊ±ÇË¥¥ÂêàVPSÁöÑÂÆûÈôÖÔºå‰∏çËÉΩÊó†ËÑëÊé®ÔºåË¶ÅÂÉè‰∏Ä‰∏™‰ºòÁßÄÁöÑVPSÊé®ÂπøÂïÜÈÇ£Ê†∑Êé®Âπø‰∫ßÂìÅ„ÄÇ'`;class Pr{constructor(f,h){M(this,"root");M(this,"rest");M(this,"logPanel");M(this,"bootstrap");M(this,"vpsContainer");M(this,"timezoneSelect");M(this,"configBundle");M(this,"modelBundle");M(this,"keyModal");M(this,"keyInput");M(this,"hasKey");M(this,"currentConfig");M(this,"currentVps",[]);M(this,"availabilityTimer");M(this,"inFlightValidation",!1);this.root=f,this.bootstrap=h,this.rest=new cr(h.restUrl,h.nonce),this.hasKey=h.hasKey}init(){this.renderLayout(),this.mountLogPanel(),this.attachTimezone(),this.attachButtons(),this.loadVpsCards(),this.bootstrap.isAdmin&&(this.prepareModals(),this.loadConfigForEditing(),this.loadModelForEditing())}mountLogPanel(){const f=document.createElement("div");f.className="asv-log-panel",this.root.appendChild(f),this.logPanel=new yr(f,this.bootstrap.timezone)}renderLayout(){this.root.innerHTML="";const f=document.createElement("div");f.className="asv-toolbar";const h=document.createElement("div");h.className="asv-actions";const o=this.createButton("ÁºñËæëVPSÈÖçÁΩÆ");o.dataset.action="edit-config";const y=this.createButton("ÁºñËæëÊ®°ÂûãÈÖçÁΩÆ");y.dataset.action="edit-model";const r=this.createButton(this.hasKey?"Êõ¥Êñ∞KEY":"Ê∑ªÂä†KEY");r.dataset.action="add-key";const F=this.createButton("Ê£ÄÊü•ÂèØÁî®ÊÄß");if(F.dataset.action="diagnostics",this.bootstrap.isAdmin)h.append(o,y,r,F);else{const b=document.createElement("p");b.className="asv-viewer-note",b.textContent="ÊÇ®Ê≠£Âú®Êü•ÁúãÂÖ¨ÂºÄÊé®Âπø‰ø°ÊÅØÔºåÈÖçÁΩÆÈ°π‰ªÖÁÆ°ÁêÜÂëòÂèØËßÅ„ÄÇ",h.appendChild(b)}const w=document.createElement("div");w.className="asv-timezone";const k=document.createElement("label");k.textContent="Êó∂Âå∫";const a=document.createElement("select");a.disabled=!this.bootstrap.isAdmin,this.bootstrap.options.forEach(b=>{const S=document.createElement("option");S.value=b,S.textContent=b,b===this.bootstrap.timezone&&(S.selected=!0),a.appendChild(S)}),this.timezoneSelect=a,k.appendChild(a),w.appendChild(k),f.append(h,w),this.root.appendChild(f),this.vpsContainer=document.createElement("div"),this.vpsContainer.className="asv-vps-list",this.root.appendChild(this.vpsContainer)}createButton(f){const h=document.createElement("button");return h.type="button",h.textContent=f,h.className="asv-btn",h}attachTimezone(){var f;(f=this.timezoneSelect)==null||f.addEventListener("change",async()=>{const h=this.timezoneSelect.value;try{await this.rest.saveTimezone(h),this.logPanel.setTimezone(h),this.logPanel.push(`Â∑≤ÂàáÊç¢Âà∞ ${h}`)}catch(o){this.logPanel.push(`ËÆæÁΩÆÊó∂Âå∫Â§±Ë¥•Ôºö${o.message}`,"error")}})}attachButtons(){this.root.addEventListener("click",f=>{const h=f.target;if(h.matches("[data-action]")){if(!this.bootstrap.isAdmin){this.logPanel.push("ÈúÄË¶ÅÁÆ°ÁêÜÂëòÊùÉÈôêÊâßË°åÊ≠§Êìç‰Ωú","error");return}switch(h.dataset.action){case"edit-config":this.configBundle.modal.show();break;case"edit-model":this.modelBundle.modal.show();break;case"add-key":this.keyModal.show();break;case"diagnostics":this.runDiagnostics();break}}})}prepareModals(){this.configBundle=this.createEditorModal("ÁºñËæë config.toml",$r,async()=>{try{await this.rest.saveConfig(this.configBundle.textarea.value),this.logPanel.push("ÈÖçÁΩÆÂ∑≤‰øùÂ≠ò","success"),this.currentConfig=new St(this.configBundle.textarea.value),this.loadVpsCards(),this.triggerAvailabilitySweep("‰øùÂ≠òÈÖçÁΩÆÂêéÁ´ãÂç≥È™åËØÅ")}catch(r){this.logPanel.push(`‰øùÂ≠òÂ§±Ë¥•Ôºö${r.message}`,"error")}}),this.modelBundle=this.createEditorModal("ÁºñËæë model.toml",xr,async()=>{try{await this.rest.saveModel(this.modelBundle.textarea.value),this.logPanel.push("Ê®°ÂûãÈÖçÁΩÆÂ∑≤‰øùÂ≠ò","success"),this.loadVpsCards()}catch(r){this.logPanel.push(`‰øùÂ≠òÊ®°ÂûãÂ§±Ë¥•Ôºö${r.message}`,"error")}});const f=document.createElement("div");f.className="asv-modal__content";const h=document.createElement("input");h.type="password",h.placeholder="sk-xxx",h.className="asv-input",this.keyInput=h;const o=document.createElement("button");o.type="button",o.className="asv-eye",o.textContent="üëÅ",o.addEventListener("mouseenter",()=>{this.keyInput.type="text"}),o.addEventListener("mouseleave",()=>{this.keyInput.type="password"});const y=this.createButton("‰øùÂ≠òÈÖçÁΩÆ");y.addEventListener("click",async()=>{try{await this.rest.saveApiKey(this.keyInput.value),this.hasKey=!0,this.logPanel.push("API KEY Â∑≤Êõ¥Êñ∞","success"),this.keyModal.hide(),this.keyInput.value=""}catch(r){this.logPanel.push(`‰øùÂ≠ò KEY Â§±Ë¥•Ôºö${r.message}`,"error")}}),f.append(h,o,y),this.keyModal=new Tt("Ê∑ªÂä†/Êõ¥Êñ∞ KEY",f),this.keyModal.mount(this.root)}createEditorModal(f,h,o){const y=document.createElement("div");if(y.className="asv-modal__content",h){const k=document.createElement("details");k.className="asv-helper";const a=document.createElement("summary");a.textContent="Êü•ÁúãÈªòËÆ§Á§∫‰æã";const b=document.createElement("pre");b.textContent=h,k.append(a,b),y.appendChild(k)}const r=document.createElement("textarea");r.className="asv-textarea",r.rows=18;const F=this.createButton("‰øùÂ≠òÈÖçÁΩÆ");F.addEventListener("click",o),y.append(r,F);const w=new Tt(f,y);return w.mount(this.root),{modal:w,textarea:r,saveButton:F}}async loadConfigForEditing(){try{const{content:f}=await this.rest.fetchConfig();this.configBundle.textarea.value=f,this.currentConfig=new St(f),this.logPanel.push("Â∑≤ËΩΩÂÖ• config.toml"),this.scheduleValidation()}catch(f){this.logPanel.push(`ËΩΩÂÖ• config.toml Â§±Ë¥•Ôºö${f.message}`,"error")}}async loadModelForEditing(){try{const{content:f}=await this.rest.fetchModel();this.modelBundle.textarea.value=f,this.logPanel.push("Â∑≤ËΩΩÂÖ• model.toml")}catch(f){this.logPanel.push(`ËΩΩÂÖ• model.toml Â§±Ë¥•Ôºö${f.message}`,"error")}}async loadVpsCards(){this.vpsContainer.innerHTML='<div class="asv-loading">Ê≠£Âú®ÊäìÂèñVPSÊï∞ÊçÆ...</div>';try{const{vps:f}=await this.rest.fetchVps();this.currentVps=f,this.renderVpsList(f),this.bootstrap.isAdmin&&this.scheduleValidation()}catch(f){this.vpsContainer.innerHTML='<p class="asv-error">Êó†Ê≥ïËé∑ÂèñVPS‰ø°ÊÅØ</p>',this.logPanel.push(`Ëé∑ÂèñVPSÂ§±Ë¥•Ôºö${f.message}`,"error")}}renderVpsList(f){if(this.vpsContainer.innerHTML="",!f.length){this.vpsContainer.innerHTML="<p>ÊöÇÊó† VPS ËÆ∞ÂΩï</p>";return}f.forEach(h=>{const o=document.createElement("article");o.className="asv-card",o.dataset.key=`${h.vendor}-${h.pid}`,h.available===!1&&o.classList.add("asv-card--offline");const y=document.createElement("header");y.className="asv-card__header";const r=document.createElement("div"),F=document.createElement("a");F.href=h.sale_url,F.target="_blank",F.rel="noopener",F.className="asv-sale-link",F.textContent="Êé®ÂπøÈìæÊé•";const w=document.createElement("span");w.className="asv-card__tag",w.textContent=`${h.vendor.toUpperCase()} #${h.pid}`,r.append(F,w),y.append(r,this.createStatusPill(h)),o.appendChild(y);const k=document.createElement("p");k.className="asv-card__promo",k.textContent=h.promo||"Á≠âÂæÖÁîüÊàêÊé®ÂπøËØùÊúØ...",o.appendChild(k);const a=document.createElement("ul");a.className="asv-card__meta",h.meta.forEach(S=>{const O=document.createElement("li");O.textContent=S,a.appendChild(O)}),o.appendChild(a);const b=document.createElement("footer");if(b.className="asv-card__footer",h.human_comment){const S=document.createElement("span");S.textContent=`Â§áÊ≥®Ôºö${h.human_comment}`,b.appendChild(S)}if(this.bootstrap.isAdmin){const S=document.createElement("button");S.className="asv-btn asv-btn--ghost",S.type="button",S.textContent="È™åËØÅ",S.addEventListener("click",()=>this.validateSingle(h.vendor,h.pid,"ÊâãÂä®È™åËØÅ")),b.appendChild(S)}o.appendChild(b),this.vpsContainer.appendChild(o)})}createStatusPill(f){const h=document.createElement("span");return h.className="asv-status-pill",f.available===null?(h.classList.add("asv-status-pill--idle"),h.textContent="Á≠âÂæÖÈ™åËØÅ"):f.available?(h.classList.add("asv-status-pill--up"),h.textContent="Âú®Á∫ø"):(h.classList.add("asv-status-pill--down"),h.textContent="Â∑≤ÂîÆÁΩÑ"),h}scheduleValidation(){if(!this.bootstrap.isAdmin||!this.currentConfig)return;this.availabilityTimer&&window.clearInterval(this.availabilityTimer);const f=this.currentConfig.listVps();if(!f.length)return;const h=f.map(y=>{var r;return((r=this.currentConfig)==null?void 0:r.getIntervalSeconds(y.vendor))??86400}),o=Math.max(60,Math.min(...h));this.availabilityTimer=window.setInterval(()=>{this.triggerAvailabilitySweep("ÂÆöÊó∂Â∑°Ê£Ä")},o*1e3)}triggerAvailabilitySweep(f){!this.bootstrap.isAdmin||this.inFlightValidation||(this.inFlightValidation=!0,this.logPanel.push(`${f}ÔºöÂºÄÂßãÈ™åËØÅÊâÄÊúâ VPS`),this.validateAll().catch(h=>this.logPanel.push(`ÊâπÈáèÈ™åËØÅÂ§±Ë¥•Ôºö${h.message}`,"error")).finally(()=>{this.inFlightValidation=!1}))}async validateAll(){var f;for(const h of this.currentVps){await this.validateSingle(h.vendor,h.pid,"ÊâπÈáèÈòüÂàó");const o=((f=this.currentConfig)==null?void 0:f.getDelayRange(h.vendor))??{min:5,max:10},y=this.randomDelay(o.min,o.max);await this.sleep(y)}}async validateSingle(f,h,o){try{const y=await this.rest.validateVps(f,h);this.logPanel.push(`${o}Ôºö${f} ${h} -> ${y.available?"Âú®Á∫ø":"ÂîÆÁΩÑ"} (${y.message})`),this.applyStatus(f,h,y.available,y.message,y.checked_at)}catch(y){this.logPanel.push(`È™åËØÅ ${f} ${h} Â§±Ë¥•Ôºö${y.message}`,"error")}}applyStatus(f,h,o,y,r){var a;const F=`${f}-${h}`,w=this.vpsContainer.querySelector(`[data-key="${F}"]`);if(w){w.classList.toggle("asv-card--offline",!o);const b=w.querySelector(".asv-status-pill");if(b&&(b.textContent=o?"Âú®Á∫ø":"Â∑≤ÂîÆÁΩÑ",b.className=`asv-status-pill ${o?"asv-status-pill--up":"asv-status-pill--down"}`),o)(a=w.querySelector(".asv-soldout"))==null||a.remove();else{let S=w.querySelector(".asv-soldout");S||(S=document.createElement("div"),S.className="asv-soldout",w.appendChild(S)),S.textContent=y||"ËØ• VPS ÊöÇ‰∏çÂèØÁî®"}}const k=this.currentVps.find(b=>b.vendor===f&&b.pid===h);k&&(k.available=o,k.message=y,k.checked_at=r??Date.now()/1e3)}async runDiagnostics(){try{const f=await this.rest.runDiagnostics();this.renderDiagnostics(f)}catch(f){this.logPanel.push(`ËØäÊñ≠Â§±Ë¥•Ôºö${f.message}`,"error")}}renderDiagnostics(f){this.logPanel.push(`ÁΩëÁªúÔºö${f.network.ok?"Ê≠£Â∏∏":"ÂºÇÂ∏∏"} - ${f.network.message}`),this.logPanel.push(`LLMÔºö${f.llm.ok?"Â∞±Áª™":"ÂºÇÂ∏∏"} - ${f.llm.message}`)}randomDelay(f,h){const o=h-f;return(f+Math.random()*o)*1e3}sleep(f){return new Promise(h=>{window.setTimeout(h,f)})}}const Nt=window.ASV_BOOTSTRAP,Ft=document.getElementById("asv-root");Ft&&Nt?new Pr(Ft,Nt).init():console.warn("AutoSaleVPS: Áº∫Â∞ëÊåÇËΩΩËäÇÁÇπÊàñÂàùÂßãÂåñÊï∞ÊçÆ");
//# sourceMappingURL=main.js.map
